!function o(s,a,h){function u(e,t){if(!a[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[e]={exports:{}};s[e][0].call(r.exports,function(t){return u(s[e][1][t]||t)},r,r.exports,o,s,a,h)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;function i(){}i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],2:[function(t,e,i){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],3:[function(t,e,d){var a=/%[sdj%]/g;d.format=function(t){if(!b(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(h(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,r=n.length,o=String(t).replace(a,function(t){if("%%"===t)return"%";if(r<=i)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),s=n[i];i<r;s=n[++i])m(s)||!u(s)?o+=" "+s:o+=" "+h(s);return o},d.deprecate=function(t,e){if(w(global.process))return function(){return d.deprecate(t,e).apply(this,arguments)};if(!0===process.noDeprecation)return t;var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),i=!0}return t.apply(this,arguments)}};var n,r={};function h(t,e){var i={seen:[],stylize:s};return 3<=arguments.length&&(i.depth=arguments[2]),4<=arguments.length&&(i.colors=arguments[3]),g(e)?i.showHidden=e:e&&d._extend(i,e),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),f(i,t,i.depth)}function o(t,e){var i=h.styles[e];return i?"["+h.colors[i][0]+"m"+t+"["+h.colors[i][1]+"m":t}function s(t,e){return t}function f(e,i,n){if(e.customInspect&&i&&A(i.inspect)&&i.inspect!==d.inspect&&(!i.constructor||i.constructor.prototype!==i)){var t=i.inspect(n,e);return b(t)||(t=f(e,t,n)),t}var r=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(x(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(e,i);if(r)return r;var o,s=Object.keys(i),a=(o={},s.forEach(function(t,e){o[t]=!0}),o);if(e.showHidden&&(s=Object.getOwnPropertyNames(i)),E(i)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return v(i);if(0===s.length){if(A(i)){var h=i.name?": "+i.name:"";return e.stylize("[Function"+h+"]","special")}if(S(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(T(i))return e.stylize(Date.prototype.toString.call(i),"date");if(E(i))return v(i)}var u,l="",p=!1,c=["{","}"];_(i)&&(p=!0,c=["[","]"]),A(i)&&(l=" [Function"+(i.name?": "+i.name:"")+"]");return S(i)&&(l=" "+RegExp.prototype.toString.call(i)),T(i)&&(l=" "+Date.prototype.toUTCString.call(i)),E(i)&&(l=" "+v(i)),0!==s.length||p&&0!=i.length?n<0?S(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),u=p?function(e,i,n,r,t){for(var o=[],s=0,a=i.length;s<a;++s)M(i,String(s))?o.push(y(e,i,n,r,String(s),!0)):o.push("");return t.forEach(function(t){t.match(/^\d+$/)||o.push(y(e,i,n,r,t,!0))}),o}(e,i,n,a,s):s.map(function(t){return y(e,i,n,a,t,p)}),e.seen.pop(),function(t,e,i){if(60<t.reduce(function(t,e){return 0<=e.indexOf("\n")&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0))return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(u,l,c)):c[0]+l+c[1]}function v(t){return"["+Error.prototype.toString.call(t)+"]"}function y(t,e,i,n,r,o){var s,a,h;if((h=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),M(n,r)||(s="["+r+"]"),a||(t.seen.indexOf(h.value)<0?-1<(a=m(i)?f(t,h.value,null):f(t,h.value,i-1)).indexOf("\n")&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),w(s)){if(o&&r.match(/^\d+$/))return a;s=(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(s,"string"))}return s+": "+a}function _(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function m(t){return null===t}function x(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return void 0===t}function S(t){return u(t)&&"[object RegExp]"===i(t)}function u(t){return"object"==typeof t&&null!==t}function T(t){return u(t)&&"[object Date]"===i(t)}function E(t){return u(t)&&("[object Error]"===i(t)||t instanceof Error)}function A(t){return"function"==typeof t}function i(t){return Object.prototype.toString.call(t)}function l(t){return t<10?"0"+t.toString(10):t.toString(10)}d.debuglog=function(e){if(w(n)&&(n=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!r[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var i=process.pid;r[e]=function(){var t=d.format.apply(d,arguments);console.error("%s %d: %s",e,i,t)}}else r[e]=function(){};return r[e]},(d.inspect=h).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},d.isArray=_,d.isBoolean=g,d.isNull=m,d.isNullOrUndefined=function(t){return null==t},d.isNumber=x,d.isString=b,d.isSymbol=function(t){return"symbol"==typeof t},d.isUndefined=w,d.isRegExp=S,d.isObject=u,d.isDate=T,d.isError=E,d.isFunction=A,d.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},d.isBuffer=t("./support/isBuffer");var p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}d.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[l(t.getHours()),l(t.getMinutes()),l(t.getSeconds())].join(":"),[t.getDate(),p[t.getMonth()],e].join(" ")),d.format.apply(d,arguments))},d.inherits=t("inherits"),d._extend=function(t,e){if(!e||!u(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}},{"./support/isBuffer":2,inherits:1}],4:[function(t,e,i){"use strict";function n(t){this.id=t,this.volume=1,this.muted=!0,this.loopSound=null,this.loopId=null,this.loopVol=0,this.nextLoop=null}(e.exports=n).prototype.setVolume=function(t,e){var i=this.muted;this.muted=0===t||e||!1,null!=t?this.volume=t:t=this.volume,this.loopId&&(this.loopSound&&this.muted?this.loopSound.stop():this.loopSound&&this.loopSound.id===this.loopId?(this.loopSound.setVolume(Math.max(0,Math.min(1,t*this.loopVol))),i&&this.loopSound.play()):this.muted||this.audioManager.playLoopSound(this.id,this.loopId,this.loopVol))},n.prototype.setMute=function(t){this.setVolume(null,t)},n.prototype.playLoopSound=function(t,i,n,r,o,s){var a=this.audioManager,h=a.settings.defaultFade,e=a.settings.crossFading,u=this.loopSound,l=u&&u.id;if(i=Math.max(0,Math.min(1,i||1)),this.loopId=t,this.loopVol=i,!a.muted&&!this.muted){if(t===l&&u)return u.play(i*this.volume,n,r),void(this.nextLoop&&(this.nextLoop.cancelOnLoadCallbacks(),this.nextLoop=null));if(u=null,!this.nextLoop||this.nextLoop.id!==t){var p=this;e?(this.nextLoop&&this.nextLoop.cancelOnLoadCallbacks(),this.nextLoop=a.createSound(t,this.id),this.nextLoop.load(function(t){if(t)return p.nextLoop.unload(),void(p.nextLoop=null);c(p.loopSound),f()})):(this.nextLoop=a.createSound(t,this.id),c(this.loopSound,f))}}function c(t,e){if(!t)return e&&e();t.stopping||t.stop(function(){return a.freeSound(t),t=null,e&&e()})}function d(){var e=p.loopSound=p.nextLoop;p.nextLoop=null,e&&(e.setLoop(!0,o,s),e.fade=h,e.load(function(t){if(t)return e.unload(),void(p.loopSound=null);e.play(i*p.volume,n,r)}))}function f(){p.loopSound=null,window.setTimeout(d,0)}}},{}],5:[function(t,e,i){"use strict";var n=window.AudioContext||window.webkitAudioContext,r=t("./OrderedList"),o=t("./SoundBuffered.js"),s=t("./SoundGroup.js"),a=t("./AudioChannel.js"),h=t("./ISound.js");function u(t){this.soundsById={},this.soundGroupsById={},this.permanentSounds={},this.freeSoundPool=[],this.soundArchive=new r(function(){return 1}),this.soundGroupArchive=new r(function(){return 1}),this.soundArchiveById={},this.soundGroupArchiveById={},this.usedMemory=0,this.channels={},this.audioContext=null,this.muted=!1,this.settings={audioPath:"",maxSoundGroup:500,maxUsedMemory:300,defaultFade:2,maxPlayLatency:1e3,crossFading:!1,getFileUri:function(t,e){return t+e+".mp3"},getSoundConstructor:function(){return null}};for(var e=0;e<t.length;e++){var i=t[e];this.channels[i]=new a(i)}h.prototype.audioManager=this,s.prototype.audioManager=this,a.prototype.audioManager=this}n||(console.warn("Web Audio API is not supported on this platform. Fallback to regular HTML5 <Audio>"),o=t("./Sound.js"),window.Audio||(console.warn("HTML5 <Audio> is not supported on this platform. Sound features are unavailable."),o=h)),e.exports=u,e.exports.ISound=h,u.prototype.init=function(){if(!this.audioContext&&n)for(var t in this.audioContext=new n,o.prototype.audioContext=this.audioContext,this.soundsById)this.soundsById[t].init()},u.prototype.getEmptySound=function(t,e){var i,n=this.settings.getSoundConstructor(t,e);return n?i=new n:(0<this.freeSoundPool.length?(i=this.freeSoundPool.pop()).init():i=new o,i)},u.prototype.setup=function(t){for(var e in t){var i=t[e];this.setVolume(e,i.volume,i.muted)}},u.prototype.addChannel=function(t){this.channels[t]||(this.channels[t]=new a(t))},u.prototype.setVolume=function(t,e,i){var n=this.channels[t];n&&n.setVolume(e,i)},u.prototype.setMute=function(t){for(var e in void 0===t&&(t=!this.muted),this.muted=!!t,this.channels){var i=this.channels[e];if(i.loopSound)if(t)i.loopSound.stop();else{var n=i.muted;i.muted=!0,i.setVolume(null,n)}}},u.prototype.loadSound=function(t,e){var i=this.createSound(t);return i.load(e),i},u.prototype.createSound=function(t,e){var i=this.getSound(t);return i||((i=this.soundsById[t]=this.getEmptySound(e,t)).setId(t),i)},u.prototype.createSoundPermanent=function(t,e){var i=this.getSound(t);if(i)return i;var n=this.settings.getSoundConstructor(e,t)||o;return(i=this.permanentSounds[t]=new n).setId(t),i},u.prototype.getSound=function(t){var e=this.permanentSounds[t];return e||((e=this.soundsById[t])?e:(e=this.soundArchiveById[t])?(this.soundArchive.removeByRef(e.poolRef),e.poolRef=null,delete this.soundArchiveById[t],this.soundsById[t]=e):null)},u.prototype.getSoundGroup=function(t){var e=this.soundGroupsById[t];return e||((e=this.soundGroupArchiveById[t])?(this.soundGroupArchive.removeByRef(e.poolRef),e.poolRef=null,delete this.soundGroupArchiveById[t],e.verifySounds(),this.soundGroupsById[t]=e):null)},u.prototype.freeSound=function(t){var e=t.id;this.soundsById[e]&&delete this.soundsById[e],this.soundArchiveById[e]&&(this.soundArchive.removeByRef(t.poolRef),t.poolRef=null,delete this.soundArchiveById[e]),t.unload(),t instanceof o&&this.freeSoundPool.push(t)},u.prototype.playLoopSound=function(t,e,i,n,r,o,s){var a=this.channels[t];if(!a)return console.warn('Channel id "'+t+'" does not exist.');a.playLoopSound(e,i,n,r,o,s)},u.prototype.stopLoopSound=function(t){var e=this,i=this.channels[t];if(!i)return console.warn('Channel id "'+t+'" does not exist.');var n=i.loopSound;i.loopId=null,n&&n.stop(function(){e.freeSound(n),i.loopSound=null})},u.prototype.stopAllLoopSounds=function(){for(var t in this.channels)this.stopLoopSound(t)},u.prototype.release=function(){var t,e,i,n=this.settings.maxSoundGroup,r=this.settings.maxUsedMemory,o={};for(t in this.channels){var s=this.channels[t];s.loopSound&&(o[s.loopSound.id]=!0)}for(t in this.soundGroupsById)(e=this.soundGroupsById[t]).poolRef=this.soundGroupArchive.add(e),this.soundGroupArchiveById[t]=e,delete this.soundGroupsById[t];for(t in this.soundsById)o[t]||((i=this.soundsById[t]).poolRef=this.soundArchive.add(i),this.soundArchiveById[t]=i,delete this.soundsById[t]);for(var a=this.soundGroupArchive.getCount();n<a&&(e=this.soundGroupArchive.popFirst());)e.poolRef=null,delete this.soundGroupArchiveById[e.id],--a;for(;this.usedMemory>r&&(i=this.soundArchive.popFirst());)i.poolRef=null,delete this.soundArchiveById[i.id],this.freeSound(i)},u.prototype.playSound=function(t,e,i,n,r){if(!this.muted){var o=this.channels[t];if(!o.muted){var s=this.getSound(e);i=i||1,(s=s||this.createSound(e,t)).play(o.volume*i,n,r)}}},u.prototype.playSoundGroup=function(t,e,i,n,r){if(!this.muted){var o=this.channels[t];if(o&&!o.muted){var s=this.getSoundGroup(e);if(!s)return console.warn('SoundGroup "'+e+'" does not exist.');i=i||1,s.play(i*o.volume,n,r)}}},u.prototype.createSoundGroup=function(t,e,i){if(!this.getSoundGroup(t)){var n=new s(t,e.id,e.vol,e.pitch,i);this.soundGroupsById[t]=n}},u.prototype.createSoundGroups=function(t,e){var i=void 0!==e&&this.channels[e].muted;for(var n in t)this.createSoundGroup(n,t[n],i)}},{"./AudioChannel.js":4,"./ISound.js":6,"./OrderedList":7,"./Sound.js":8,"./SoundBuffered.js":9,"./SoundGroup.js":10}],6:[function(t,e,i){"use strict";function n(){this.playing=!1,this.stopping=!1,this.fade=0,this.usedMemory=0,this.poolRef=null,this.id=null,this.volume=1,this.pan=0,this.loop=!1,this.pitch=0,this._loaded=!1,this._loading=!1,this._unloading=!1,this._playTriggered=0,this._onLoadQueuedCallback=[]}(e.exports=n).prototype.setId=function(t){this.id=t,this._loaded=!1},n.prototype.load=function(t){return this.id?this._loaded?t&&t(null,this):(t&&this._onLoadQueuedCallback.push(t),this._loading?void 0:(this._loading=!0,this._load())):t&&t("noId")},n.prototype._finalizeLoad=function(t){var e=this.audioManager.settings.maxPlayLatency;this._loaded=!t,this._loading=!1;for(var i=0;i<this._onLoadQueuedCallback.length;i++)this._onLoadQueuedCallback[i](t,this);if(this._onLoadQueuedCallback=[],this._unloading)return this._unloading=!1,void this.unload();this._loaded&&this._playTriggered&&((this.loop||Date.now()-this._playTriggered<e)&&this._play(),this._playTriggered=0)},n.prototype.cancelOnLoadCallbacks=function(){this._onLoadQueuedCallback=[]},n.prototype.play=function(t,e,i){if(null!=t&&this.setVolume(t),null!=e&&this.setPan(e),!this._loaded)return this._playTriggered=Date.now(),void this.load();this.loop&&this.playing?this._updatePlayPitch(i):this._play(i)},n.prototype.init=function(){},n.prototype.setVolume=function(t){this.volume=t},n.prototype.setPan=function(t){this.pan=t},n.prototype.setLoop=function(t){this.loop=t},n.prototype.setPitch=function(t){this.pitch=t},n.prototype._updatePlayPitch=function(t){},n.prototype._play=function(t){this.playing=!0,console.log('ISound play call: "'+this.id+'"')},n.prototype.stop=function(t){return this.playing=!1,t&&t()},n.prototype._load=function(){return console.log("ISound load call: "+this.id),this._finalizeLoad(null)},n.prototype.unload=function(){return this._playTriggered=0,this.setLoop(!1),this.fade=0,this.pitch=0,this.stop(),this._loading?!(this._unloading=!0):(this.audioManager.usedMemory-=this.usedMemory,this.setVolume(1),this.setPan(0),this.id=null,this._loaded=!1,!(this.usedMemory=0))}},{}],7:[function(t,e,i){"use strict";function o(t,e,i,n){this.object=t,this.previous=e,this.next=i,this.container=n}function n(t){this.count=0,this.first=null,this.last=null,this.cmpFunc=t}n.prototype.add=function(t){var e=new o(t,null,null,this);if(this.count+=1,null===this.first)return this.first=e,this.last=e;var i=this.cmpFunc(t,this.first.object);if(i<0)return e.next=this.first,this.first.previous=e,this.first=e;var n,r=this.cmpFunc(t,this.last.object);if(0<=r)return e.previous=this.last,this.last.next=e,this.last=e;if(i+r<0){for(n=this.first.next;0<=this.cmpFunc(t,n.object);)n=n.next;e.next=n,e.previous=n.previous,e.previous.next=e,n.previous=e}else{for(n=this.last.previous;this.cmpFunc(t,n.object)<0;)n=n.previous;e.previous=n,e.next=n.next,e.next.previous=e,n.next=e}return e},n.prototype.removeByRef=function(t){return!(!t||t.container!==this)&&(--this.count,null===t.previous?this.first=t.next:t.previous.next=t.next,null===t.next?this.last=t.previous:t.next.previous=t.previous,t.previous=null,t.next=null,!(t.container=null))},n.prototype.moveToTheBeginning=function(t){return!(!t||t.container!==this)&&(null===t.previous||(t.previous.next=t.next,this.last===t?this.last=t.previous:t.next.previous=t.previous,t.previous=null,t.next=this.first,t.next.previous=t,this.first=t),!0)},n.prototype.moveToTheEnd=function(t){return!(!t||t.container!==this)&&(null===t.next||(t.next.previous=t.previous,this.first===t?this.first=t.next:t.previous.next=t.next,t.next=null,t.previous=this.last,t.previous.next=t,this.last=t),!0)},n.prototype.possess=function(t){return t&&t.container===this},n.prototype.popFirst=function(){var t=this.first;if(!t)return null;--this.count;var e=t.object;return this.first=t.next,null!==this.first&&(this.first.previous=null),t.next=null,t.container=null,e},n.prototype.popLast=function(){var t=this.last;if(!t)return null;--this.count;var e=t.object;return this.last=t.previous,null!==this.last&&(this.last.next=null),t.previous=null,t.container=null,e},n.prototype.getFirst=function(){return this.first&&this.first.object},n.prototype.getLast=function(){return this.last&&this.last.object},n.prototype.clear=function(){for(var t=this.first;t;t=t.next)t.container=null;this.count=0,this.first=null,this.last=null},n.prototype.getCount=function(){return this.count},n.prototype.forEach=function(t,e){for(var i=this.first;i;i=i.next)t(i.object,e)},n.prototype.forEachReverse=function(t,e){for(var i=this.last;i;i=i.previous)t(i.object,e)},n.prototype.reposition=function(t){if(t.container!==this)return this.add(t.object);var e=t.previous,i=t.next,n=t.object;for(null===i?this.last=e:i.previous=e,null===e?this.first=i:e.next=i;null!==e&&this.cmpFunc(n,e.object)<0;)e=(i=e).previous;for(;null!==i&&0<=this.cmpFunc(n,i.object);)i=(e=i).next;return null===(t.next=i)?this.last=t:i.previous=t,null===(t.previous=e)?this.first=t:e.next=t,t},e.exports=n},{}],8:[function(t,e,i){"use strict";var n=t("util").inherits,r=t("./ISound.js"),o={playAudioWhenScreenIsLocked:!1};function s(){r.call(this);var t=new Audio;t.loop=!1,t.type="audio/mpeg",this._audio=t,this.audioContext&&(this.source=this.audioContext.createMediaElementSource(t),this.source.connect(this.audioContext.destination))}n(s,r),(e.exports=s).prototype.setVolume=function(t){this.volume=this._audio.volume=t},s.prototype.setLoop=function(t){this.loop=this._audio.loop=t},s.prototype._load=function(){var e=this;function i(t){e._finalizeLoad(t)}function n(){this.removeEventListener("canplaythrough",n),this.removeEventListener("error",r),e.usedMemory=this.duration,e.audioManager.usedMemory+=this.duration,e._finalizeLoad(null)}function r(t){this.removeEventListener("canplaythrough",n),this.removeEventListener("error",r),i(t)}function o(t){e._loading=!0,e._audio.addEventListener("canplaythrough",n),e._audio.addEventListener("error",r),e._audio.src=t,e._audio.load()}var t=this.audioManager.settings.getFileUri,s=this.audioManager.settings.audioPath;if(2<t.length)t(s,this.id,function(t,e){if(t)return i(t);o(e)});else try{var a=t(s,this.id);if(!a)return i("emptyUri");o(a)}catch(t){i(t)}},s.prototype.unload=function(){r.prototype.unload.call(this)&&(this._audio.volume=1,this._audio.src="",this._audio.load())},s.prototype._play=function(t){this._audio.volume=this.volume,this._audio.pause(),this._audio.currentTime=0,this._audio.play(o),this.playing=!0},s.prototype.stop=function(t){return this._audio.pause(),this._audio.currentTime=0,this._playTriggered=0,this.playing=!1,t&&t()}},{"./ISound.js":6,util:3}],9:[function(t,e,i){"use strict";var n=t("util").inherits,r=t("./ISound.js"),o=1e-6;function s(){r.call(this),this.buffer=null,this.source=null,this.sourceConnector=null,this.gain=null,this.panNode=null,this.rawAudioData=null,this._playPitch=0,this._fadeTimeout=null,this._onStopCallback=null,this._audioNodeReady=!1,this._loopStart=0,this._loopEnd=0,this.init()}n(s,r),(e.exports=s).prototype._createAudioNodes=function(){if(!this._audioNodeReady&&this.audioContext){var t,e=this.audioContext,i=e.createGain();t=e.createStereoPanner?e.createStereoPanner():e.createPanner(),i.connect(t),t.connect(e.destination),i.gain.value=0,this.sourceConnector=i,this.gain=i.gain,this.panNode=t,this._audioNodeReady=!0}},s.prototype._destroyAudioNodes=function(){if(this._audioNodeReady){var t=this.audioContext,e=this.panNode,i=this.sourceConnector;i.disconnect(e),e.disconnect(t.destination),this.source&&(this.source.disconnect(i),this.source.onended=null,this.source=null),this.sourceConnector=null,this.gain=null,this.panNode=null,this.rawAudioData=null,this._audioNodeReady=!1}},s.prototype.init=function(){if(this._createAudioNodes(),this.rawAudioData){var e=this,i=this.audioManager.settings.maxPlayLatency;this.audioContext.decodeAudioData(this.rawAudioData,function(t){e.buffer=t,e.usedMemory=t.duration,e.audioManager.usedMemory+=t.duration,e.rawAudioData=null,e._loaded&&e._playTriggered&&((e.loop||Date.now()-e._playTriggered<i)&&e._play(),e._playTriggered=0)},function(){console.error("decode audio failed for sound ",e.id)})}},s.prototype.setVolume=function(t){if(this.volume=t,this.playing)if(this.fade){t<=0&&(t=o);var e=this.audioContext.currentTime;this.gain.cancelScheduledValues(e),this.gain.setValueAtTime(this.gain.value||o,e),this.gain.linearRampToValueAtTime(t,e+this.fade)}else this.gain.value=t},s.prototype.setPan=function(t){this.pan=t,this.panNode&&(this.panNode.pan?this.panNode.pan.value=t:this.panNode.setPosition(t,0,.2))},s.prototype.setLoop=function(t,e,i){this.loop=!!t,this._loopStart=e||0,this._loopEnd=i||0,this.source&&this.buffer&&(this.source.loop=t,this._setLoopPoints())},s.prototype._setLoopPoints=function(){this.source.loopStart=this._loopStart||0;var t=this._loopEnd;t<0&&(t=this.buffer.duration+t),t<0&&(t=0),this.source.loopEnd=t||this.buffer.duration},s.prototype.setPitch=function(t,e){this.pitch=t,this._setPlaybackRate(e)},s.prototype._updatePlayPitch=function(t){!t&&0!==t||t===this._playPitch||(this._playPitch=t,this._setPlaybackRate(0))},s.prototype._setPlaybackRate=function(t){if(this.source){var e=Math.pow(2,(this._playPitch+this.pitch)/12);if(t){var i=this.audioContext.currentTime;this.source.playbackRate.cancelScheduledValues(i),this.source.playbackRate.setValueAtTime(this.source.playbackRate.value||o,i),this.source.playbackRate.linearRampToValueAtTime(e,i+t)}else this.source.playbackRate.value=e}},s.prototype._load=function(){var i=this;function n(t){i._finalizeLoad(t)}function r(t){i.buffer=t,i.usedMemory=t.duration,i.audioManager.usedMemory+=t.duration,i._finalizeLoad(null)}function o(t){var e=new XMLHttpRequest;e.responseType="arraybuffer",e.onreadystatechange=function(){if(4==~~e.readyState)return 200!=~~e.status&&0!=~~e.status?n("xhrError:"+e.status):void(i.audioContext?i.audioContext.decodeAudioData(e.response,r,n):(i.rawAudioData=e.response,i._finalizeLoad(null)))},e.open("GET",t,!0),e.send()}this._createAudioNodes();var t=this.audioManager.settings.getFileUri,e=this.audioManager.settings.audioPath;if(2<t.length)t(e,this.id,function(t,e){if(t)return n(t);o(e)});else try{var s=t(e,this.id);if(!s)return n("emptyUri");o(s)}catch(t){n(t)}},s.prototype.unload=function(){r.prototype.unload.call(this)&&(this._fadeTimeout&&(this._onStopCallback=null,this._stopAndClear()),this.buffer=null,this.source&&(this.source.onended=null,this.source.stop(0),this.source=null),this._destroyAudioNodes())},s.prototype._play=function(t){if(this.buffer){this.playing=!0;var e=this.audioContext.currentTime;if(this.gain.cancelScheduledValues(e),this.fade?(this.gain.setValueAtTime(this.gain.value||o,e),this.gain.linearRampToValueAtTime(this.volume||o,e+this.fade)):this.gain.value=this.volume,this._fadeTimeout)return this._onStopCallback=null,this.source.onended=null,this.stopping=!1,window.clearTimeout(this._fadeTimeout),void(this._fadeTimeout=null);this.source&&(this.source.disconnect(this.sourceConnector),this.source.onended=null);var i=this.source=this.audioContext.createBufferSource();i.connect(this.sourceConnector);var n=this;i.onended=function(){n.playing=!1,i.onended=null,n.source=null},this._playPitch=t||0,(t||this.pitch)&&this._setPlaybackRate(0),i.loop=this.loop,i.buffer=this.buffer,this._setLoopPoints(),i.start(0)}else this._playTriggered=Date.now()},s.prototype._stopAndClear=function(){this.stopping=!1,this.source.onended=null,this.source.stop(0),this.source=null,this._fadeTimeout&&(window.clearTimeout(this._fadeTimeout),this._fadeTimeout=null),this._onStopCallback&&(this._onStopCallback(),this._onStopCallback=null)},s.prototype.stop=function(t){if(!this.playing&&!this.stopping)return t&&t();if(this._playTriggered=0,this.stopping=!0,this.playing=!1,!this.source)return t&&t();if(this._onStopCallback=t,!this._fadeTimeout){if(this.fade){var e=this,i=this.audioContext.currentTime;return this.gain.cancelScheduledValues(i),this.gain.setValueAtTime(this.gain.value||o,i),this.gain.linearRampToValueAtTime(o,i+this.fade),void(this._fadeTimeout=window.setTimeout(function(){e._fadeTimeout=null,e._stopAndClear()},1e3*this.fade))}this._stopAndClear()}}},{"./ISound.js":6,util:3}],10:[function(t,e,i){"use strict";function n(t,e,i,n,r){this.id=t,this.soundIds=e,this.volumes=i||[],this.pitches=n||[],this.soundIndex=0,this.volIndex=0,this.pitchIndex=0,this.poolRef=null,this._ready=!1,0===this.volumes.length&&this.volumes.push(1),0===this.pitches.length&&this.pitches.push(0),r||this._createSounds()}(e.exports=n).prototype._createSounds=function(){for(var t=this.soundIds,e=0;e<t.length;e++)this.audioManager.loadSound(t[e]);this._ready=!0},n.prototype.play=function(t,e,i){if(0!==this.soundIds.length){this._ready||this._createSounds();var n=this.soundIds[this.soundIndex++],r=this.audioManager.getSound(n);if(!r)return console.warn("[Sound Group: "+this.id+"] sound id "+n+"  cannot be played.");t=t||1,i=i||0,t*=this.volumes[this.volIndex++],i+=this.pitches[this.pitchIndex++],r.play(t,e,i),this.soundIndex>=this.soundIds.length&&(this.soundIndex=0),this.volIndex>=this.volumes.length&&(this.volIndex=0),this.pitchIndex>=this.pitches.length&&(this.pitchIndex=0)}},n.prototype.verifySounds=function(){for(var t=0;t<this.soundIds.length;t++){var e=this.soundIds[t];this.audioManager.createSound(e)}}},{}],11:[function(t,e,i){"use strict";var s=/rgba?\(\s*([.0-9]+)\s*,\s*([.0-9]+)\s*,\s*([.0-9]+)\s*,?\s*([.0-9]+)?\s*\)/;function n(){this.r=0,this.g=0,this.b=0,this.a=void 0,this.string=""}(e.exports=n).prototype._setRGB=function(t,e,i){this.r=t,this.g=e,this.b=i},n.prototype.fromPixel=function(t,e){var i=t[e+0],n=t[e+1],r=t[e+2];return this.string="rgb("+i+","+n+","+r+")",this._setRGB(i,n,r),this},n.prototype.fromString=function(t){var e,i,n,r=(this.string=t).match(s);if(r)e=~~r[1],i=~~r[2],n=~~r[3],this._setRGB(e,i,n);else{var o="0x"+t.slice(1).replace(t.length<5&&/./g,"$&$&");this._setRGB(o>>16,o>>8&255,255&o)}return this},n.prototype.fromRGB=function(t,e,i){return this._setRGB(t,e,i),this.string="rgb("+t+","+e+","+i+")",this},n.prototype.fromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this.string=t.string,this}},{}],12:[function(t,e,i){"use strict";var h=t("../spritesheet/Sprite");function n(t,e,i){t._isNineSlice&&(t=t.asset);var n=(this.asset=t).path,r=0,o=0;if(t._isTileMap)throw new Error("TileMap cannot be used as NineSlice");var s=t.width,a=t.height;t._isSprite?(r=t.x,o=t.y,t=t.img):t._isTexture&&(t=t.canvas,n=""),this.w0=e,this.w1=s-1,this.w2=s-e-1,this.h0=i,this.h1=a-1,this.h2=a-i-1,this._a=new h(t,n,r,o,e,i),this._b=new h(t,n,r+e,o,1,i),this._c=new h(t,n,r+e+1,o,this.w2,i),this._d=new h(t,n,r,o+i,e,1),this._e=new h(t,n,r+e,o+i,1,1),this._f=new h(t,n,r+e+1,o+i,this.w2,1),this._g=new h(t,n,r,o+i+1,e,this.h2),this._h=new h(t,n,r+e,o+i+1,1,this.h2),this._i=new h(t,n,r+e+1,o+i+1,this.w2,this.h2),this._j=new h(t,n,r,o,e,a),this._k=new h(t,n,r+e,o,1,a),this._l=new h(t,n,r+e+1,o,this.w2,a),this._m=new h(t,n,r,o,s,i),this._n=new h(t,n,r,o+i,s,1),this._o=new h(t,n,r,o+i+1,s,this.h2)}(e.exports=n).prototype._isNineSlice=!0,n.prototype._draw=function(t,e,i,n,r){(n=Math.round(n))<0&&(e+=n,n=-n),(r=Math.round(r))<0&&(i+=r,r=-r);var o=this.w1+1,s=this.h1+1;if(n<=o&&r<=s)t.draw(this.asset,e,i);else{var a=e+this.w0,h=e+n-this.w2,u=i+this.h0,l=i+r-this.h2;if(r<=s)return t.draw(this._j,e,i),t.stretchDraw(this._k,a,i,n-this.w1,s),void t.draw(this._l,h,i);if(n<=o)return t.draw(this._m,e,i),t.stretchDraw(this._n,e,u,o,r-this.h1),void t.draw(this._o,e,l);t.draw(this._a,e,i),t.stretchDraw(this._b,a,i,n-this.w1,this.h0),t.draw(this._c,h,i),t.stretchDraw(this._d,e,u,this.w0,r-this.h1),t.stretchDraw(this._e,a,u,n-this.w1,r-this.h1),t.stretchDraw(this._f,h,u,this.w2,r-this.h1),t.draw(this._g,e,l),t.stretchDraw(this._h,a,l,n-this.w1,this.h2),t.draw(this._i,h,l)}},n.prototype.draw=function(t,e,i,n){this._draw($screen,t,e,i,n)}},{"../spritesheet/Sprite":26}],13:[function(t,e,i){"use strict";var s=t(".");function a(t){console.error('Could not find asset "'+t+'"')}function r(t,e,i){for(var n=t.split("/"),r=window.assets,o=n.pop();0<n.length;)if(!(r=r[n.shift()]))return void a(t);r[o]?r[o]=new s(r[o],e,i):a(t)}e.exports=function(t){if("Nine slices config"===t._type){var e=t.sprites;for(var i in e){var n=e[i];r(i,n.w,n.h)}}}},{".":12}],14:[function(t,e,i){"use strict";function n(t,e){this.width=t,this.height=e,this.camera={x:0,y:0},this._cursor={i:0,j:0},this._paper=0,this._pen=1,this._init()}function r(t,e){t.ox=0,t.oy=0,e._isImageWrapper&&(e=e.asset),e._isSprite?(t.ox=e.x,t.oy=e.y,t.tilesheet=e.img):e._isMap?(e.texture||e._prepareTexture(),t.tilesheet=e.texture.canvas):e._isTexture?t.tilesheet=e.canvas:(e instanceof Image||e instanceof HTMLCanvasElement)&&(t.tilesheet=e)}(e.exports=n).prototype.palette=[{string:"#000000",r:0,g:0,b:0},{string:"#FFFFFF",r:1,g:1,b:1}],n.prototype.ox=0,n.prototype.oy=0,n.setTileSize=function(){},n.prototype.setPalette=function(t){n.prototype.palette=t},n.prototype.setGlobalTilesheet=function(t){r(n.prototype,t)},n.prototype.setTilesheet=function(t){if(t)return r(this,t),this;delete this.tilesheet},n.prototype.setCamera=function(t,e){return this.camera.x=t||0,this.camera.y=e||0,this}},{}],15:[function(t,e,i){"use strict";var u=t("../domUtils/createCanvas"),l=[0,8338,45,11962,5588,21157,29354,10,17556,5265,21973,1488,5312,448,13824,5268,31599,29843,29671,31143,18925,31183,31689,18735,31727,18927,1040,5136,17492,3640,5393,8359,25450,23530,31467,25166,15211,29391,4815,27470,23533,29847,15142,23277,29257,23421,23403,11114,4843,26474,23279,14798,9367,27501,12141,24429,23213,14829,29351,25750,17553,13459,9402,28672,34,23530,31467,25166,15211,29391,4815,27470,23533,29847,15142,23277,29257,23421,23403,11114,4843,26474,23279,14798,9367,27501,12141,24429,23213,14829,29351,25686,9362,13587,42,21845];e.exports=function(){var t=u(64,36),e=t.getContext("2d");e.fillStyle="#FFF";for(var i=0;i<l.length;i++)for(var n=l[i],r=i%16,o=~~(i/16),s=0;s<15;s++){var a=s%3,h=~~(s/3);1==(n>>s&1)&&e.fillRect(4*r+a,6*o+h,1,1)}return t}},{"../domUtils/createCanvas":22}],16:[function(t,e,i){"use strict";function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=t("./index.js"),r=t("./minitext"),y=t("../webGL/batcher"),_=y.renderers,g=4,m=6,x=0,b=0,o=r(),w=o,s=n.prototype.resize;n.prototype.resize=function(t,e){return this._cursor.i=0,this._cursor.j=0,s.call(this,t,e),this};var a=n.prototype.cls;n.prototype.cls=function(){return a.call(this),this.locate(0,0),this},n.prototype.locate=function(t,e){return this._cursor.i=~~t,this._cursor.j=~~e,this},n.prototype.print=function(e,t,i){if("object"===v(e))try{e=JSON.stringify(e)}catch(t){e="[Object]"}else"string"!=typeof e&&(e=e.toString());var n=y.prepare(_.colorSprite,w,this),r=this.palette[this._pen],o=r.r,s=r.g,a=r.b;if(void 0!==t){t=~~Math.round(t-this.camera.x),i=~~Math.round(i-this.camera.y);for(var h=t,u=0;u<e.length;u++){if(10!==(f=e.charCodeAt(u))&&13!==f)if((f-=32)<0||255<f)t+=g;else{var l=g*(f%16)+x,p=m*~~(f/16)+b;n.pushSprite(t,i,g,m,l,p,o,s,a),t+=g}else i+=m,t=h}return this}u=this._cursor.i;for(var c=this._cursor.j,d=0;d<e.length;d++){var f;if(this.width-u*g<g&&(u=0,c+=1),this.height-c*m<m&&(this.textScroll(),--c,n=y.prepare(_.colorSprite,w,this)),10!==(f=e.charCodeAt(d))&&13!==f)if((f-=32)<0||255<f)u+=1;else{l=g*(f%16)+x,p=m*~~(f/16)+b;n.pushSprite(u*g,c*m,g,m,l,p,o,s,a),u+=1}else c+=1,u=0}return this._cursor.i=u,this._cursor.j=c,this},n.prototype.println=function(t){return this.print(t),this.print("\n"),this},n.prototype.textScroll=function(t){return void 0===t&&(t=1),this._cursor.j-=t,t*=m,this._copyTexture||(this._copyTexture=new n(this.width,this.height)),this._copyTexture.draw(this,0,0),this.cls(),this.draw(this._copyTexture,0,-t),this},n.prototype.setCharset=function(t){var e=this._cursor.i*g,i=this._cursor.j*m;g=~~((w=t||o).width/16),m=~~(w.height/6),this._cursor.i=Math.ceil(e/g),this._cursor.j=Math.ceil(i/m),b=x=0,w._isSprite&&(x=w.x,b=w.y,w=w.img)}},{"../webGL/batcher":29,"./index.js":14,"./minitext":15}],17:[function(t,e,i){"use strict";var p=t("./index.js"),n=t("../webGL/context"),c=t("../webGL/batcher"),r=n.gl,d=c.renderers,o=t("..").settings,h=~~o.tileSize.width,u=~~o.tileSize.height;function s(t,e){if(t.ox=0,t.oy=0,e._isImageWrapper&&(e=e.asset),e._isSprite)t.ox=e.x,t.oy=e.y,t.tilesheet=e.img;else{if(e._isMap)throw new Error("TileMap cannot be used as tilesheet if using webGL");e._isTexture?t.tilesheet=e.canvas:(e._isGlTexture||e instanceof Image||e instanceof HTMLCanvasElement)&&(t.tilesheet=e)}}p.prototype._init=function(){if(0===this.width||0===this.height)return this.ctx=null,void(this.framebuffer=null);this.ctx=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.ctx),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),this.framebuffer=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.ctx,0)},p.prototype.setCamera=function(t,e){return this.camera.x=t||0,this.camera.y=e||0,this},p.prototype.sprite=function(t,e,i,n,r,o){if(e=Math.round((e||0)-this.camera.x),i=Math.round((i||0)-this.camera.y),e>=this.width||i>=this.height||e<=-h||i<=-u)return this;var s=t%16*h+this.ox,a=u*~~(t/16)+this.oy;return c.prepare(d.sprite,this.tilesheet,this).pushSprite(e,i,h,u,s,a,n,r,o),this},p.prototype.draw=function(t,e,i,n,r,o){if(!t)return console.error("Invalid asset"),this;if(t._isNineSlice)return t._draw(this,e,i,n,r),this;if(t===this&&(this._copyTexture||(this._copyTexture=new p(this.width,this.height)),this._copyTexture.draw(this,0,0),t=this._copyTexture),t._isTileMap)return t._draw(e,i,n,r,o,this),this;if(e=Math.round((e||0)-this.camera.x),i=Math.round((i||0)-this.camera.y),e>=this.width||i>=this.height)return this;if(t._isSprite){var s=t;t=s.img;var a=s.x,h=s.y,u=s.width,l=s.height;if(e<=-u||i<=-l)return this;c.prepare(d.sprite,t,this).pushSprite(e,i,u,l,a,h,n,r,o)}else{if(e<=-t.width||i<=-t.height)return this;c.prepare(d.sprite,t,this).pushSprite(e,i,t.width,t.height,0,0,n,r,o)}return this},p.prototype.stretchDraw=function(t,e,i,n,r){if(t._isSprite){var o=t;t=o.img;var s=o.x,a=o.y,h=o.width,u=o.height,l=~~Math.round((e||0)-this.camera.x),p=~~Math.round((i||0)-this.camera.y);return c.prepare(d.sprite,t,this).pushStretchSprite(l,p,n,r,s,a,h,u),this}t._isTexture&&(t=t.canvas);l=~~Math.round((e||0)-this.camera.x),p=~~Math.round((i||0)-this.camera.y);return c.prepare(d.sprite,t,this).pushStretchSprite(l,p,n,r,0,0,img.width,img.height),this},p.prototype.clear=function(){return c.flush(),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.viewport(0,0,this.width,this.height),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),this},p.prototype.cls=function(){var t=this.palette[this._paper];return c.flush(),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.viewport(0,0,this.width,this.height),r.clearColor(t.r/255,t.g/255,t.b/255,1),r.clear(r.COLOR_BUFFER_BIT),this},p.prototype.paper=function(t){return this._paper=t%this.palette.length,this},p.prototype.pen=function(t){return this._pen=t%this.palette.length,this},p.prototype.setTilesheet=function(t){if(t)return s(this,t),this;delete this.tilesheet},p.prototype.setGlobalTilesheet=function(t){s(p.prototype,t)},window.tilesheet=function(t){return p.prototype.setGlobalTilesheet(t)},window.texture=function(t){var e=new p(t.width,t.height);return e.clear().draw(t,0,0),e},p.prototype.rect=function(t,e,i,n){var r=this.palette[this._pen],o=c.prepare(d.color,null,this);return i<=2||n<=2?o.pushRect(t,e,i,n,r.r,r.g,r.b):(o.pushRect(t,e,i,1,r.r,r.g,r.b),o.pushRect(t,e+n-1,i,1,r.r,r.g,r.b),o.pushRect(t,e,1,n,r.r,r.g,r.b),o.pushRect(t+i-1,e,1,n,r.r,r.g,r.b)),this},p.prototype.rectf=function(t,e,i,n){var r=this.palette[this._paper];return c.prepare(d.color,null,this).pushRect(t,e,i,n,r.r,r.g,r.b),this},p.prototype.rectfill=p.prototype.rectf,p.prototype.resize=function(t,e){return this.width===t&&this.height===e||(this.width=t,this.height=e,this._init(),this._copyTexture&&(this._copyTexture=null)),this},p.prototype._isTexture=!0,p.prototype._isGlTexture=!0},{"..":24,"../webGL/batcher":29,"../webGL/context":30,"./index.js":14}],18:[function(t,e,i){"use strict";var n=t("../Texture"),r=t(".."),u=8,l=8;function p(t,e,i,n,r,o,s,a){this.x=~~t,this.y=~~e,this.sprite=~~i,this.flipH=!!n,this.flipV=!!r,this.flipR=!!o,this.flagA=!!s,this.flagB=!!a}function o(t,e){this._name="",this.width=0,this.height=0,this.items=[],this.texture=null,this.tilesheet=null,this._tilesheetPath="",t&&e&&this._init(t,e)}(e.exports=o).prototype._isTileMap=!0;var a,d,s={},h=[];o.getMap=function(t){return"string"==typeof t?s[t]:"number"==typeof t?h[t]:(console.error("Map does not exist",t),null)},o._checkBankFormat=function(t){return t?Array.isArray(t)?{_type:"maps",maps:t}:"maps"!==t._type?(console.warn("Map bank format incorrect"),{_type:"maps",maps:[]}):t:{_type:"maps",maps:[]}},o.loadBank=function(t){t=o._checkBankFormat(t),s={},h=[];for(var e=t.maps||[],i=0;i<e.length;i++)h.push((new o).load(e[i]))},o.setTileSize=function(t,e){u=~~t,l=~~e},Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(t){this._name&&s[this._name]&&s[this._name]===this&&delete s[this._name],(this._name=t)&&!s[t]&&(s[t]=this)}}),o.prototype._init=function(t,e){this.width=t,this.height=e,this.items=[];for(var i=0;i<t;i++){this.items.push([]);for(var n=0;n<e;n++)this.items[i][n]=null}this.texture&&this.texture.resize(t*u,e*l)},o.prototype.resize=function(t,e){var i=this.items,n=Math.min(this.width,t),r=Math.min(this.height,e);this._init(t,e);for(var o=0;o<n;o++)for(var s=0;s<r;s++)this.items[o][s]=i[o][s];return this.redraw(),this},o.prototype.set=function(t,e,i,n,r,o,s,a){if(null==i)return this.remove(t,e);if(!(t<0||e<0||t>=this.width||e>=this.height)){var h=this.items[t][e]=new p(t,e,i,n,r,o,s,a);return this.texture&&(this.texture.ctx.clearRect(t*u,e*l,u,l),this.texture.sprite(h.sprite,h.x*u,h.y*l,h.flipH,h.flipV,h.flipR)),this}},o.prototype.remove=function(t,e){if(!(t<0||e<0||t>=this.width||e>=this.height))return this.items[t][e]=null,this.texture&&this.texture.ctx.clearRect(t*u,e*l,u,l),this},o.prototype.get=function(t,e){return t<0||e<0||t>=this.width||e>=this.height?null:this.items[t][e]},o.prototype.redraw=function(){if(!this.texture)return this;this.texture.clear();for(var t=0;t<this.width;t++)for(var e=0;e<this.height;e++){var i=this.items[t][e];i&&this.texture.sprite(i.sprite,i.x*u,i.y*l,i.flipH,i.flipV,i.flipR)}return this},o.prototype._prepareTexture=function(){this.texture=new n(this.width*u,this.height*l),this.texture.setTilesheet(this.tilesheet),this.redraw()},o.prototype.release=function(){this.texture=null},o.prototype.draw=function(t,e){this.texture||this._prepareTexture(),draw(this.texture,t,e)},o.prototype.setTilesheet=function(t){return this.tilesheet=t,this._tilesheetPath=t&&t.path||"",this.texture&&(this.texture.setTilesheet(t),this.redraw()),this},o.prototype._setTilesheetPath=function(t){if(this._tilesheetPath=t||"",!t)return this.setTilesheet();for(var e=t.split("/"),i=r.assets||{},n=0;n<e.length;n++)if(!(i=i[e[n]]))return console.warn("Could not find tilesheet",t);this.setTilesheet(i)},function(){for(var i="#$%&'()*+,-~/0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}. !",u={},t=0;t<i.length;t++)u[i[t]]=t;var l=i.length,p=l*l-1,c=Math.pow(2,13),o=p-c-1;function s(t){var e=t%l;return i[~~(t/l)]+i[e]}a=function(t){for(var e="",i=0,n=0;n<t.length;n++){var r=t[n];r===t[n+1]&&++i<o||(null===r&&(r=p),e+=s(r),i===o&&i--,0!==i&&(e+=s(c+i)),i=0)}return i===o&&i--,0!==i&&(e+=s(c+i)),e},d=function(t){for(var e=[],i=0;i<t.length;){var n=t[i++],r=t[i++],o=u[n]*l+u[r];if(o===p)e.push(null);else if(c<o)for(var s=o-c,a=e[e.length-1],h=0;h<s;h++)e.push(a);else e.push(o)}return e}}(),o.prototype.save=function(){for(var t=this.width,e=this.height,i=new Array(t*e),n=0;n<t;n++)for(var r=0;r<e;r++){var o=this.items[n][r];i[n+r*t]=o?o.sprite+(o.flipH<<8)+(o.flipV<<9)+(o.flipR<<10)+(o.flagA<<11)+(o.flagB<<12):null}return{w:t,h:e,name:this.name,sheet:this._tilesheetPath||"",data:a(i)}},o.prototype.load=function(t){this.texture=null;var e=t.w,i=t.h;this._init(e,i),this.name=t.name||"",this._setTilesheetPath(t.sheet);for(var n=d(t.data),r=0;r<e;r++)for(var o=0;o<i;o++){var s=n[r+o*e];if(null!==s){var a=255&s,h=s>>8&1,u=s>>9&1,l=s>>10&1,p=s>>11&1,c=s>>12&1;this.set(r,o,a,h,u,l,p,c)}}return this},o.prototype.copy=function(t,e,i,n){t=t||0,e=e||0,null==i&&(i=this.width),null==n&&(n=this.height);var r=new o(i,n);return r.paste(this,-t,-e),r},o.prototype.paste=function(t,e,i,n){e=e||0,i=i||0;for(var r=Math.min(t.width,this.width-e),o=Math.min(t.height,this.height-i),s=Math.max(0,-e),a=Math.max(0,-i),h=s;h<r;h++)for(var u=a;u<o;u++){var l=t.items[h][u];if(l)this.set(h+e,u+i,l.sprite,l.flipH,l.flipV,l.flipR,l.flagA,l.flagB);else{if(n)continue;this.remove(h+e,u+i)}}return this},o.prototype.clear=function(){for(var t=0;t<this.width;t++)for(var e=0;e<this.height;e++)this.items[t][e]=null;return this.texture&&this.texture.clear(),this},o.prototype.find=function(t,e,i){if(null===t)return this._findNull();void 0===e&&(e=null),void 0===i&&(i=null);for(var n=[],r=0;r<this.width;r++)for(var o=0;o<this.height;o++){var s=this.items[r][o];if(s){var a=null===e||s.flagA===e,h=null===i||s.flagB===i;s.sprite===t&&a&&h&&n.push(s)}}return n},o.prototype._findNull=function(){for(var t=[],e=0;e<this.width;e++)for(var i=0;i<this.height;i++)null===this.items[e][i]&&t.push({x:e,y:i});return t}},{"..":24,"../Texture":14}],19:[function(t,e,i){"use strict";var n=t("./index.js"),B=t("../Texture"),C=t("../webGL/batcher"),I=t(".."),r=I.settings,P=r.tileSize.width,O=r.tileSize.height,k=r.screen.width,F=r.screen.height,U=C.renderers.sprite,j={false:{false:{false:{flipH:!1,flipV:!1,flipR:!0},true:{flipH:!0,flipV:!0,flipR:!1}},true:{false:{flipH:!0,flipV:!1,flipR:!0},true:{flipH:!1,flipV:!0,flipR:!1}}},true:{false:{false:{flipH:!1,flipV:!0,flipR:!0},true:{flipH:!0,flipV:!1,flipR:!1}},true:{false:{flipH:!0,flipV:!0,flipR:!0},true:{flipH:!1,flipV:!1,flipR:!1}}}};n.prototype._prepareTexture=function(){},n.prototype.release=function(){},n.prototype.redraw=function(){},n.prototype.draw=function(t,e,i,n,r){this._draw(t,e,i,n,r,I.$screen)},n.prototype._draw=function(t,e,i,n,r,o){var s=this.tilesheet||B.prototype.tilesheet,a=C.prepare(U,s,o),h=I.$screen.camera;t=Math.round((t||0)-h.x),e=Math.round((e||0)-h.y);var u=this.tilesheet||assets.tilesheet,l=0,p=0;if(u._isSprite&&(l=u.x,p=u.y),i||n||r){var c,d;d=r?(c=this.height,this.width):(c=this.width,this.height);for(var f=Math.max(0,~~(-t/P)),v=Math.max(0,~~(-e/O)),y=Math.min(c,~~(1+(k-t)/P)),_=Math.min(d,~~(1+(F-e)/O)),g=v;g<_;g++)for(var m=f;m<y;m++){var x,b;if(b=r?(x=g,this.height-1-m):(x=m,g),i&&(x=this.width-1-x),n&&(b=this.height-1-b),L=this.get(x,b)){var w,S,T,E=(D=L.sprite)%16*P+l,A=~~(D/16)*O+p,M=t+m*P,G=e+g*O;if(r){var R=j[L.flipH][L.flipV][L.flipR];w=R.flipH,S=R.flipV,T=R.flipR,i&&(S=!S),n&&(w=!w)}else w=L.flipH,S=L.flipV,T=L.flipR,i&&(w=!w),n&&(S=!S);a.pushSprite(M,G,P,O,E,A,w,S,T)}}}else for(f=Math.max(0,~~(-t/P)),v=Math.max(0,~~(-e/O)),y=Math.min(this.width,~~(1+(k-t)/P)),_=Math.min(this.height,~~(1+(F-e)/O)),g=v;g<_;g++)for(m=f;m<y;m++){var L;if(L=this.get(m,g)){var D;E=(D=L.sprite)%16*P+l,A=~~(D/16)*O+p,M=t+m*P,G=e+g*O;a.pushSprite(M,G,P,O,E,A,L.flipH,L.flipV,L.flipR)}}},e.exports=n},{"..":24,"../Texture":14,"../webGL/batcher":29,"./index.js":18}],20:[function(t,e,i){"use strict";function d(t,e){var i=new Image;i.onload=function(){this.onload=null,this.onerror=null,e&&e(null,this)},i.onerror=function(){this.onload=null,this.onerror=null,e&&e("img:"+t)},i.src=t}function f(t,e){var i=new Audio;function n(){e&&e(null,i),i.removeEventListener("canplaythrough",n),i.removeEventListener("error",r)}function r(){e&&e("snd:load"),i.removeEventListener("canplaythrough",n),i.removeEventListener("error",r)}i.preload=!0,i.loop=!1,i.addEventListener("canplaythrough",n),i.addEventListener("error",r),i.src=t,i.load()}i.loadData=function(t,e,i){var n=new XMLHttpRequest;n.responseType=e||"arraybuffer",n.onreadystatechange=function(){if(4==~~n.readyState)return 200!=~~n.status&&0!=~~n.status?i&&i("xhrError:"+n.status):i&&i(null,n.response)},n.open("GET",t,!0),n.send()},i.loadJson=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==~~i.readyState)return 200!=~~i.status?e("xhrError:"+i.status):e&&e(null,JSON.parse(i.response))},i.open("GET",t,!0),i.send()},i.loadImage=d,i.loadSound=f,i.preloadStaticAssets=function(n,r,o){var a=n.dat,s=n.img.length,h=s+n.snd.length,u=n.root,l=0,p=0;function c(){var i,t,e=l+p;o&&o(l,e,h,e/h),t=e<s?(i=n.img[e],d):(i=n.snd[e-s],f),p+=1,t(u+i,function(t,e){t||function(t,e){var i=t.split("/"),n=i.pop().split(".");n.pop(),n=n.join(".");for(var r=a,o=0,s=i.length;o<s;o++)r=r[i[o]];r[n]=e,i.push(n),e.name=n,e.path=i.join("/")}(i,e),(l+=1)+--p<h?c():0===p&&r(null,a)})}if(0===h)return r(null,a);for(var t=Math.min(5,h-1),e=0;e<=t;e++)c()}},{}],21:[function(t,e,i){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,r;n=window,r=function(){return n={},r.m=i=[function(t,e,i){var r=i(4);function n(){this.name="",this.speed=20,this.pmin=0,this.pmax=127,this.snap=!1,this.steps=[],this.audio=null}(t.exports=n).prototype.serialize=function(){for(var t="",e=0;e<this.steps.length;e++)t+=this.steps[e].serialize();return{n:this.name,i:[this.speed,this.pmin,this.pmax,~~this.snap],s:t}},n.prototype.deserialize=function(t){this.name=t.n,this.speed=t.i[0],this.pmin=t.i[1],this.pmax=t.i[2],this.snap=!!t.i[3],this.audio=null,this.steps=[];for(var e=t.s,i=0;i<e.length;i+=3){var n=new r;n.deserialize(e,i),this.steps.push(n)}return this},n.prototype.check=function(){11<this.name.length&&(this.name=this.name.substr(0,11)),this.speed=Math.max(0,Math.min(53,~~this.speed)),this.pmin=Math.max(0,Math.min(101,~~this.pmin)),this.pmax=Math.max(26,Math.min(127,~~this.pmax));for(var t=0;t<this.steps.length;t++)this.steps[t].check()}},function(t,e){e.SAMPLE_RATE=44100,e.CHUNK_LENGTH=50},function(t,e,i){var n=i(3),r=i(0),o=new(i(6)),s=audioManager.getEmptySound().__proto__.constructor;if(!s.prototype._createAudioNodes)throw new Error("webAudio required");function a(t){s.call(this),this._data=t}function h(t){var e=new a(t);return t.audio=e}inherits(a,s),a.prototype.load=function(t){if(this._loaded)return t&&t(null,this);t&&this._onLoadQueuedCallback.push(t),this.buffer=o.generateSound(this._data),this.usedMemory=this.buffer.duration,this.audioManager.usedMemory+=this.buffer.duration,this._finalizeLoad(null)},r.prototype.play=function(t,e,i){this.audio?this.audio.play(t,e,i):h(this).play(t,e,i)};var u=new n,l=[];e.loadProgram=function(t){u.deserialize(t),assets.bleeper={};for(var e=l.length=0;e<u.sounds.length;e++){var i=u.sounds[e],n=h(i);l.push(n);var r=i.name;r&&(assets.bleeper[r]=n,audioManager.permanentSounds[r]=n)}return u},e.sounds=l},function(t,e,i){var r=i(0);function n(){this.version=1,this.sounds=[]}(t.exports=n).prototype.serialize=function(){for(var t=[],e=0;e<this.sounds.length;e++)t.push(this.sounds[e].serialize());return{_type:"Bleeper program",v:this.version,s:t}},n.prototype.deserialize=function(t){if("Bleeper program"!==t._type)throw new Error("Incorrect data type");this.version=t.v,this.sounds.length=0;for(var e=t.s,i=0;i<e.length;i++){var n=new r;n.deserialize(e[i]),this.sounds.push(n)}return this},n.prototype.check=function(){if(0!==this.sounds.length)for(var t=0;t<this.sounds.length;t++)this.sounds[t].check();else this.sounds.push(new r)}},function(t,e,i){var r=i(5);function n(){this.wave=0,this.pitch=0,this.volume=0}(t.exports=n).prototype.serialize=function(){var t=this.wave,e=this.pitch;return 92<this.pitch&&(t+=8,e-=92),r.encodeUint6(t)+r.encodeUint6(e)+r.encodeUint6(this.volume)},n.prototype.deserialize=function(t,e){var i=r.decodeUint6(t,e),n=r.decodeUint6(t,e+1);return this.volume=r.decodeUint6(t,e+2),8<=i&&(i-=8,n+=92),this.wave=i,this.pitch=n,this},n.prototype.check=function(){this.wave=Math.max(0,Math.min(7,~~this.wave)),this.pitch=Math.max(0,Math.min(93,~~this.pitch)),this.volume=Math.max(0,Math.min(62,~~this.volume))}},function(t,e){for(var i="#$%&'()*+,-~/0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}. !",r=i.length,o={},n=0;n<i.length;n++)o[i[n]]=n;e.encodeUint13=function(t){return i[~~(t/r)]+i[t%r]},e.encodeUint6=function(t){return i[t]},e.decodeUint13=function(t,e){var i=t[e],n=t[e+1];return o[i]*r+o[n]},e.decodeUint6=function(t,e){return o[t[e]]}},function(t,e,i){var u=i(7),n=i(8),r=i(1),l=r.SAMPLE_RATE,p=r.CHUNK_LENGTH;function o(){this.oscillator=new n}(t.exports=o).prototype.generateSound=function(t){var e=t.steps;if(0===e.length)return null;var i=(t.speed+1)*p,n=e.length*i+100,r=u.createBuffer(1,n,l),o=r.getChannelData(0);this.oscillator.reset();for(var s=0,a=0;s<e.length;s++){var h=e[s];this.oscillator.setStep(t,h),this.oscillator.generate(o,a,a+i),a+=i}return this.oscillator.generateEndDamping(o,a,a+100),r}},function(t,e){var i=new window.AudioContext;t.exports=i},function(t,e,i){var n=i(9),r=i(1).SAMPLE_RATE,o=2*Math.PI,s=[0,.12,.25,.37,.5,.62,.75,.87,.87,.75,.62,.5,.37,.25,.12,0,-.12,-.25,-.37,-.5,-.62,-.75,-.87,-1,-1,-.87,-.75,-.62,-.5,-.37,-.25,-.12];function a(){this._amp=1,this._oscPos=0,this._oscInc=0,this._oscState=1,this._oscOut=0,this._duty=0,this._prevOut=0,this.generate=this._generatePulse}(t.exports=a).prototype.reset=function(){this._oscPos=0,this._oscState=1,this._oscOut=0,this._prevOut=0},a.prototype.setStep=function(t,e){var i=t.pmin+(t.pmax-t.pmin-20)*e.pitch/93;switch(i=20+90*i/107,t.snap&&(i=Math.round(i)),this._oscInc=n.noteToFreq(i)/r,this._amp=e.volume/63,e.wave){case 0:this.generate=this._generatePulse,this._duty=.06;break;case 1:this.generate=this._generatePulse,this._duty=.12;break;case 2:this.generate=this._generatePulse,this._duty=.25;break;case 3:this.generate=this._generatePulse,this._duty=.5;break;case 4:this.generate=this._generateTriangle;break;case 5:this.generate=this._generateSine;break;case 6:this.generate=this._generateSaw,this._amp*=2;break;case 7:this.generate=this._generateNoise,this._oscInc=2.9*this._oscInc+.01}},a.prototype._generatePulse=function(t,e,i){for(var n=this._prevOut,r=e;r<i;r++)this._oscPos+=this._oscInc,1<this._oscPos&&(this._oscPos=this._oscPos%1),n=this._oscPos>this._duty?this._amp:-this._amp,t[r]=n;this._prevOut=n},a.prototype._generateTriangle=function(t,e,i){for(var n=this._prevOut,r=e;r<i;r++)this._oscPos+=this._oscInc,1<this._oscPos&&(this._oscPos=this._oscPos%1),n=s[~~(32*this._oscPos)]*this._amp,t[r]=n;this._prevOut=n},a.prototype._generateSine=function(t,e,i){for(var n=this._prevOut,r=e;r<i;r++)this._oscPos+=this._oscInc,1<this._oscPos&&(this._oscPos=this._oscPos%1),n=Math.sin(this._oscPos*o)*this._amp,t[r]=n;this._prevOut=n},a.prototype._generateSaw=function(t,e,i){for(var n=this._prevOut,r=e;r<i;r++)this._oscPos+=this._oscInc,1<this._oscPos&&(this._oscPos=this._oscPos%1),n=(this._oscPos-.5)*this._amp,t[r]=n;this._prevOut=n},a.prototype._generateNoise=function(t,e,i){for(var n=this._prevOut,r=e;r<i;r++){if(this._oscPos+=this._oscInc,1<this._oscPos){this._oscPos=this._oscPos%1;var o=!(16384&this._oscState)^!(8192&this._oscState);this._oscState=32767&(this._oscState<<1|o),this._oscOut=(16384&this._oscState)>>14}n=(this._oscOut-.5)*this._amp,t[r]=n}this._prevOut=n},a.prototype.generateEndDamping=function(t,e,i){for(var n=this._prevOut,r=e;r<i;r++)n*=.98,t[r]=n}},function(t,e){for(var r=[],i=0;i<128;i++)r.push(440*Math.pow(2,(i-69)/12));e.noteToFreqTable=r,e.noteToFreq=function(t){t<0&&(t=0),127<t&&(t=127);var e=~~t,i=t-e,n=r[e];return n+i*(r[1+e]-n)}}],r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==o(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2);function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i,n},"object"==(void 0===i?"undefined":o(i))&&"object"==(void 0===e?"undefined":o(e))?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==(void 0===i?"undefined":o(i))?i.bleeper=r():n.bleeper=r()},{}],22:[function(t,e,i){"use strict";e.exports=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i}},{}],23:[function(t,e,i){"use strict";var p=["A","B","X","Y","lb","rb","lt","rt","back","start","lp","rp","up","down","left","right"],n=!(!navigator||!navigator.getGamepads),c=!1,d=.2;function r(){this.available=!1,this.btn={},this.btnp={},this.btnr={},this.x=0,this.y=0,this.z=0,this.w=0,this.lt=0,this.rt=0,this._setupButtons()}r.prototype._setupButtons=function(){for(var t=0;t<p.length;t++){var e=p[t];this.btn[e]=!1,this.btnp[e]=!1,this.btnr[e]=!1}};var f=[new r,new r,new r,new r,window],o=new r;var s=n?function(){for(var t=navigator.getGamepads(),e=0;e<4;e++){var i=t[e],n=f[e];if(i){var r,o,s,a;n.available=!0,c&&(r=n.btn.right,o=n.btn.left,a=n.btn.down,s=n.btn.up);for(var h=0;h<p.length;h++){var u=p[h],l=i.buttons[h].pressed;n.btnp[u]=!n.btn[u]&&l,n.btnr[u]=n.btn[u]&&!l,n.btn[u]=l}n.x=i.axes[0],n.y=i.axes[1],n.z=i.axes[2],n.w=i.axes[3],n.lt=i.buttons[6].value,n.rt=i.buttons[7].value,c&&(n.btn.right=n.btn.right||n.x>d,n.btn.left=n.btn.left||n.x<-d,n.btn.down=n.btn.down||n.y>d,n.btn.up=n.btn.up||n.y<-d,n.btnp.right=n.btn.right&&!r,n.btnp.left=n.btn.left&&!o,n.btnp.down=n.btn.down&&!a,n.btnp.up=n.btn.up&&!s,n.btnr.right=!n.btn.right&&r,n.btnr.left=!n.btn.left&&o,n.btnr.down=!n.btn.down&&a,n.btnr.up=!n.btn.up&&s)}else n.available=!1}return f}:function(){return f};i.mapAnalogStickToDpad=function(t){c=!0,d=void 0===t?.3:t},i.update=function(){window.gamepads=s(),window.gamepad=function(){for(var t=0;t<p.length;t++){var e=p[t];o.btnp[e]=btnp[e]||f[0].btnp[e]||f[1].btnp[e]||f[2].btnp[e]||f[3].btnp[e],o.btnr[e]=btnr[e]||f[0].btnr[e]||f[1].btnr[e]||f[2].btnr[e]||f[3].btnr[e],o.btn[e]=btn[e]||f[0].btn[e]||f[1].btn[e]||f[2].btn[e]||f[3].btn[e]}return o.btn.up&&o.btn.down&&(o.btn.down=!1),o.btn.right&&o.btn.left&&(o.btn.left=!1),o}()}},{}],24:[function(t,e,i){"use strict";e.exports={}},{}],25:[function(t,e,i){"use strict";e.exports=function(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}},{}],26:[function(t,e,i){"use strict";function n(t,e,i,n,r,o,s,a){this.img=t,this.path=e,this.x=i,this.y=n,this.width=r,this.height=o,this.pivotX=s||0,this.pivotY=a||0}n.prototype._isSprite=!0,e.exports=n},{}],27:[function(t,e,i){"use strict";var n=t("./context").gl;function r(t){this.uShortView=new Uint16Array(t),this.binder=n.createBuffer(),this.length=0,this.vertexIndice=0}(e.exports=r).prototype.uploadData=function(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.binder),n.bufferData(n.ELEMENT_ARRAY_BUFFER,this.uShortView,n.STATIC_DRAW)},r.prototype.bindBuffer=function(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.binder)},r.prototype.reset=function(){this.length=0,this.vertexIndice=0}},{"./context":30}],28:[function(t,e,i){"use strict";var n=t("./context").gl;function r(t){this.arrayBuffer=new ArrayBuffer(t),this.floatView=new Float32Array(this.arrayBuffer),this.uLongView=new Uint32Array(this.arrayBuffer),this.longView=new Int32Array(this.arrayBuffer),this.uShortView=new Uint16Array(this.arrayBuffer),this.shortView=new Int16Array(this.arrayBuffer),this.byteView=new Uint8Array(this.arrayBuffer),this.uByteView=new Int8Array(this.arrayBuffer),this.binder=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.binder)}(e.exports=r).prototype.uploadData=function(){n.bindBuffer(n.ARRAY_BUFFER,this.binder),n.bufferData(n.ARRAY_BUFFER,this.arrayBuffer,n.DYNAMIC_DRAW)}},{"./context":30}],29:[function(t,e,i){"use strict";var n=t("./context"),r=t("./VertexBuffer"),o=t("./IndexBuffer"),s=t("./renderers/sprite"),a=t("./renderers/line"),h=t("./renderers/colorQuad"),u=t("./renderers/colorSprite"),l=n.gl;function p(){this._renderer=s,this._program=null,this._renderTarget=null,this._channel0=null,this._batchIndex=0,this.vertexBuffer=new r(65536),this.indexBuffer=new o(32768),this.quadIndexBuffer=new o(49152),this._initQuadIndexBuffer(),this.renderers={sprite:s,line:a,color:h,colorSprite:u}}p.prototype._initQuadIndexBuffer=function(){for(var t=this.quadIndexBuffer.uShortView,e=0,i=0;i<32768;i+=4)t[e]=i,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i,t[e+4]=i+2,t[e+5]=i+3,e+=6;this.quadIndexBuffer.uploadData()},p.prototype.prepare=function(t,e,i){e&&e._isSprite&&(e=e.img);var n=!1;return e!==this._channel0&&(n=!0),i!==this._renderTarget&&(n=!0),t!==this._renderer&&(n=!0),n&&this.flush(),this._renderer.batcher=null,(t.batcher=this)._renderer=t,this._program=t.program,this._renderTarget=i,this._channel0=e,this._renderer},p.prototype.flush=function(){if(0!==this._batchIndex){var t=this._renderTarget;l.bindFramebuffer(l.FRAMEBUFFER,t.framebuffer),l.viewport(0,0,t.width,t.height);var e=n.useProgram(this._renderer.program);this._renderer.render.call(this,e),this._batchIndex=0}},e.exports=new p},{"./IndexBuffer":27,"./VertexBuffer":28,"./context":30,"./renderers/colorQuad":32,"./renderers/colorSprite":33,"./renderers/line":34,"./renderers/sprite":35}],30:[function(t,e,i){"use strict";var n=t("../domUtils/createCanvas"),r=t("..").settings,o=r.screen.width,s=r.screen.height,a=r.screen.pixelSize.width,h=r.screen.pixelSize.height,u=n(o,s);u.style.width=o*a+"px",u.style.height=s*h+"px";var l=u.getContext("webgl",{antialias:!1,alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!1,powerPreference:"default",premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1});l.viewport(0,0,u.width,u.height),l.enable(l.BLEND),l.disable(l.DEPTH_TEST),l.depthMask(!1);var p={},c=null;function d(t,e){var i=l.createShader(e);if(l.shaderSource(i,t),l.compileShader(i),!l.getShaderParameter(i,l.COMPILE_STATUS))throw new Error(l.getShaderInfoLog(i));return i}var f=new WeakMap;i.canvas=u,i.gl=l,i.programs=p,i.createProgram=function(t,e,i){if(t&&p[t])return p[t];var n=d(e,l.VERTEX_SHADER),r=d(i,l.FRAGMENT_SHADER),o=l.createProgram();if(l.attachShader(o,n),l.attachShader(o,r),l.linkProgram(o),!l.getProgramParameter(o,l.LINK_STATUS))throw l.deleteProgram(o),new Error(l.getProgramInfoLog(o));return t&&(p[t]=o),o},i.useProgram=function(t){if(c===t)return t;if(null!==c){var e=l.getProgramParameter(c,l.ACTIVE_ATTRIBUTES),i=l.getProgramParameter(t,l.ACTIVE_ATTRIBUTES);if(e<i)for(var n=e;n<i;n++)l.enableVertexAttribArray(n);else if(i<e)for(n=i;n<e;n++)l.disableVertexAttribArray(n)}return c=t,l.useProgram(t),t},i.bindTexture=function(t,e,i,n){var r,o,s;r=e._isGlTexture?e.ctx:(o=e,(s=f.get(o))||(s=l.createTexture(),l.bindTexture(l.TEXTURE_2D,s),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!0),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,o),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),f.set(o,s),s)),l.activeTexture(l.TEXTURE0+n),l.bindTexture(l.TEXTURE_2D,r),l.uniform1i(l.getUniformLocation(t,i),n)}},{"..":24,"../domUtils/createCanvas":22}],31:[function(t,e,i){"use strict";var o=t("./context"),s=t("./batcher"),a=t(".."),n=a.settings,h=o.gl,u=~~n.screen.width,l=~~n.screen.height,r=new Int16Array([0,l,0,l,u,l,u,l,0,0,0,0,u,l,u,l,u,0,u,0,0,0,0,0]),p=h.createBuffer();function c(t,e){var i=h.getAttribLocation(t,e);return h.enableVertexAttribArray(i),i}h.bindBuffer(h.ARRAY_BUFFER,p),h.bufferData(h.ARRAY_BUFFER,r,h.STATIC_DRAW),i.shaders=o.programs,i.context=o,i.canvas=o.canvas,i.gl=h,i.batcher=s,i.commit=function(){s.flush();var t,e,i,n,r=o.useProgram(o.programs.sprite);h.bindFramebuffer(h.FRAMEBUFFER,null),h.viewport(0,0,u,l),h.bindBuffer(h.ARRAY_BUFFER,p),h.uniform2f(h.getUniformLocation(r,"iChannel0Resolution"),u,l),h.uniform2f(h.getUniformLocation(r,"iResolution"),u,l),h.vertexAttribPointer(c(r,"a_coordinates"),2,h.SHORT,!1,8,0),h.vertexAttribPointer(c(r,"a_uv"),2,h.SHORT,!1,8,4),t=r,e=a.$screen,i="iChannel0",n=0,h.activeTexture(h.TEXTURE0+n),h.bindTexture(h.TEXTURE_2D,e.ctx),h.uniform1i(h.getUniformLocation(t,i),n),h.drawArrays(h.TRIANGLES,0,6)}},{"..":24,"./batcher":29,"./context":30}],32:[function(t,e,i){"use strict";var n=t("../context"),r=n.gl;function o(){this.batcher=null,this.program=n.createProgram("color",t("../shaders/color.vert"),t("../shaders/color.frag"))}o.prototype.pushRect=function(t,e,i,n,r,o,s){var a=t+i,h=e+n,u=(o<<8)+r,l=this.batcher.vertexBuffer.shortView,p=this.batcher.vertexBuffer.uShortView,c=this.batcher._batchIndex;l[c++]=t,l[c++]=e,p[c++]=u,p[c++]=s,l[c++]=a,l[c++]=e,p[c++]=u,p[c++]=s,l[c++]=a,l[c++]=h,p[c++]=u,p[c++]=s,l[c++]=t,l[c++]=h,p[c++]=u,p[c++]=s,c<32752?this.batcher._batchIndex=c:this.batcher.flush()},o.prototype.render=function(t){this.quadIndexBuffer.bindBuffer(),this.vertexBuffer.uploadData(),r.vertexAttribPointer(r.getAttribLocation(t,"a_coordinates"),2,r.SHORT,!1,8,0),r.vertexAttribPointer(r.getAttribLocation(t,"a_color"),4,r.UNSIGNED_BYTE,!0,8,4),r.uniform2f(r.getUniformLocation(t,"iResolution"),this._renderTarget.width,this._renderTarget.height);var e=this._batchIndex/4/4*6;r.drawElements(r.TRIANGLES,e,r.UNSIGNED_SHORT,0)},e.exports=new o},{"../context":30,"../shaders/color.frag":36,"../shaders/color.vert":37}],33:[function(t,e,i){"use strict";var n=t("../context"),r=n.gl;function o(){this.batcher=null,this.program=n.createProgram("colorSprite",t("../shaders/colorSprite.vert"),t("../shaders/colorSprite.frag"))}o.prototype.pushSprite=function(t,e,i,n,r,o,s,a,h){var u=t+i,l=e+n,p=r+i,c=o+n,d=(a<<8)+s,f=this.batcher.vertexBuffer.shortView,v=this.batcher.vertexBuffer.uShortView,y=this.batcher._batchIndex;f[y++]=t,f[y++]=e,f[y++]=r,f[y++]=o,v[y++]=d,v[y++]=h,f[y++]=u,f[y++]=e,f[y++]=p,f[y++]=o,v[y++]=d,v[y++]=h,f[y++]=u,f[y++]=l,f[y++]=p,f[y++]=c,v[y++]=d,v[y++]=h,f[y++]=t,f[y++]=l,f[y++]=r,f[y++]=c,v[y++]=d,v[y++]=h,y<32744?this.batcher._batchIndex=y:this.batcher.flush()},o.prototype.render=function(t){this.quadIndexBuffer.bindBuffer(),this.vertexBuffer.uploadData(),r.vertexAttribPointer(r.getAttribLocation(t,"a_coordinates"),2,r.SHORT,!1,12,0),r.vertexAttribPointer(r.getAttribLocation(t,"a_uv"),2,r.SHORT,!1,12,4),r.vertexAttribPointer(r.getAttribLocation(t,"a_color"),4,r.UNSIGNED_BYTE,!0,12,8),r.uniform2f(r.getUniformLocation(t,"iResolution"),this._renderTarget.width,this._renderTarget.height),r.uniform2f(r.getUniformLocation(t,"iChannel0Resolution"),this._channel0.width,this._channel0.height),n.bindTexture(t,this._channel0,"iChannel0",0);var e=this._batchIndex/6/4*6;r.drawElements(r.TRIANGLES,e,r.UNSIGNED_SHORT,0)},e.exports=new o},{"../context":30,"../shaders/colorSprite.frag":38,"../shaders/colorSprite.vert":39}],34:[function(t,e,i){"use strict";var n=t("../context"),r=n.gl;function o(){this.batcher=null,this.program=n.createProgram("line",t("../shaders/color.vert"),t("../shaders/color.frag"))}o.prototype.pushLines=function(t,e,i,n){},o.prototype.pushRect=function(t,e,i,n,r,o,s){var a=t+i,h=e+n-1;t+=1;var u=(o<<8)+r,l=this.batcher.vertexBuffer,p=l.shortView,c=l.uShortView,d=this.batcher._batchIndex;p[d++]=t,p[d++]=e,c[d++]=u,c[d++]=s,p[d++]=a,p[d++]=e,c[d++]=u,c[d++]=s,p[d++]=a,p[d++]=h,c[d++]=u,c[d++]=s,p[d++]=t,p[d++]=h,c[d++]=u,c[d++]=s,this.batcher._batchIndex=d;var f=this.batcher.indexBuffer,v=f.uShortView,y=(d=f.length,f.vertexIndice);v[d++]=y+0,v[d++]=y+1,v[d++]=y+1,v[d++]=y+2,v[d++]=y+2,v[d++]=y+3,v[d++]=y+3,v[d++]=y+0,f.length=d,f.vertexIndice+=4,32752<=d&&this.batcher.flush()},o.prototype.render=function(t){this.indexBuffer.uploadData(),this.vertexBuffer.uploadData(),r.vertexAttribPointer(r.getAttribLocation(t,"a_coordinates"),2,r.SHORT,!1,8,0),r.vertexAttribPointer(r.getAttribLocation(t,"a_color"),4,r.UNSIGNED_BYTE,!0,8,4),r.uniform2f(r.getUniformLocation(t,"iResolution"),this._renderTarget.width,this._renderTarget.height),r.drawElements(r.LINES,this.indexBuffer.length,r.UNSIGNED_SHORT,0),this.indexBuffer.reset()},e.exports=new o},{"../context":30,"../shaders/color.frag":36,"../shaders/color.vert":37}],35:[function(t,e,i){"use strict";var n=t("../context"),r=n.gl;function o(){this.batcher=null,this.program=n.createProgram("sprite",t("../shaders/sprite.vert"),t("../shaders/sprite.frag"))}o.prototype.pushQuad=function(t,e,i,n,r,o,s,a,h,u,l,p,c,d,f,v){var y=this.batcher.vertexBuffer.shortView,_=this.batcher._batchIndex;y[_++]=t,y[_++]=e,y[_++]=i,y[_++]=n,y[_++]=r,y[_++]=o,y[_++]=s,y[_++]=a,y[_++]=h,y[_++]=u,y[_++]=l,y[_++]=p,y[_++]=c,y[_++]=d,y[_++]=f,y[_++]=v,_<32752?this.batcher._batchIndex=_:this.batcher.flush()},o.prototype.pushSprite=function(t,e,i,n,r,o,s,a,h){var u,l,p,c=r+i,d=o+n;if(h){u=t+n,l=e+i;var f=r,v=d,y=r,_=o,g=c,m=o,x=c,b=d;s&&(p=v,v=_,_=p,p=b,b=m,m=p),a&&(p=f,f=g,g=p,p=y,y=x,x=p),this.pushQuad(t,e,f,v,u,e,y,_,u,l,g,m,t,l,x,b)}else u=t+i,l=e+n,s&&(p=r,r=c,c=p),a&&(p=o,o=d,d=p),this.pushQuad(t,e,r,o,u,e,c,o,u,l,c,d,t,l,r,d)},o.prototype.pushStretchSprite=function(t,e,i,n,r,o,s,a){var h=r+s,u=o+a,l=t+i,p=e+n;this.pushQuad(t,e,r,o,l,e,h,o,l,p,h,u,t,p,r,u)},o.prototype.render=function(t){this.quadIndexBuffer.bindBuffer(),this.vertexBuffer.uploadData(),r.vertexAttribPointer(r.getAttribLocation(t,"a_coordinates"),2,r.SHORT,!1,8,0),r.vertexAttribPointer(r.getAttribLocation(t,"a_uv"),2,r.SHORT,!1,8,4),r.uniform2f(r.getUniformLocation(t,"iResolution"),this._renderTarget.width,this._renderTarget.height),r.uniform2f(r.getUniformLocation(t,"iChannel0Resolution"),this._channel0.width,this._channel0.height),n.bindTexture(t,this._channel0,"iChannel0",0);var e=this._batchIndex/4/4*6;r.drawElements(r.TRIANGLES,e,r.UNSIGNED_SHORT,0)},e.exports=new o},{"../context":30,"../shaders/sprite.frag":40,"../shaders/sprite.vert":41}],36:[function(t,e,i){e.exports="precision mediump float;\n\nvarying vec4 iColor;\n\nvoid main() {\n\tvec4 color = iColor;\n\tcolor.a = 1.0;\n\tgl_FragColor = color;\n}\n"},{}],37:[function(t,e,i){e.exports="uniform   vec2 iResolution;\nattribute vec2 a_coordinates;\nattribute vec4 a_color;\nvarying   vec4 iColor;\n\nvoid main(void) {\n\tgl_Position = vec4(\n\t\ta_coordinates.x *  2.0 / iResolution.x - 1.0,\n\t\ta_coordinates.y * -2.0 / iResolution.y + 1.0,\n\t\t0.0,\n\t\t1.0\n\t);\n\tiColor = a_color;\n}\n"},{}],38:[function(t,e,i){e.exports="precision mediump float;\n\nuniform sampler2D iChannel0;\nvarying vec2 fragCoord;\nvarying vec4 iColor;\n\nvoid main(void) {\n\tvec4 color = texture2D(iChannel0, fragCoord);\n\tif (color.a == 0.0) discard;\n\tgl_FragColor = iColor;\n}\n"},{}],39:[function(t,e,i){e.exports="uniform   vec2 iResolution;\nuniform   vec2 iChannel0Resolution;\nattribute vec2 a_coordinates;\nattribute vec2 a_uv;\nattribute vec4 a_color;\nvarying   vec2 fragCoord;\nvarying   vec4 iColor;\n\nvoid main(void) {\n\tgl_Position = vec4(\n\t\ta_coordinates.x *  2.0 / iResolution.x - 1.0,\n\t\ta_coordinates.y * -2.0 / iResolution.y + 1.0,\n\t\t0.0,\n\t\t1.0\n\t);\n\tfragCoord = vec2(a_uv.x / iChannel0Resolution.x, 1.0 - a_uv.y / iChannel0Resolution.y);\n\tiColor = vec4(a_color.rgb, 1.0);\n}\n"},{}],40:[function(t,e,i){e.exports="precision mediump float;\n\nuniform sampler2D iChannel0;\nvarying vec2 fragCoord;\n\nvoid main(void) {\n\tvec4 color = texture2D(iChannel0, fragCoord);\n\tif (color.a == 0.0) discard;\n\tgl_FragColor = color;\n}\n"},{}],41:[function(t,e,i){e.exports="uniform   vec2 iResolution;\nuniform   vec2 iChannel0Resolution;\nattribute vec2 a_coordinates;\nattribute vec2 a_uv;\nvarying   vec2 fragCoord;\n\nvoid main(void) {\n\tgl_Position = vec4(\n\t\ta_coordinates.x *  2.0 / iResolution.x - 1.0,\n\t\ta_coordinates.y * -2.0 / iResolution.y + 1.0,\n\t\t0.0,\n\t\t1.0\n\t);\n\tfragCoord = vec2(a_uv.x / iChannel0Resolution.x, 1.0 - a_uv.y / iChannel0Resolution.y);\n}\n"},{}],42:[function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this._x=t,this._y=e,this._dir_x=3*Math.random()-1,this._dir_y=3,this._x_frequency=5,this._x_counter=0}var t,e,n;return t=i,(e=[{key:"update",value:function(){this._x_counter++,this._x_counter>=this._x_frequency&&(this._x+=this._dir_x,this._x_counter=0),this._y+=this._dir_y}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}}])&&r(t.prototype,e),n&&r(t,n),i}();i.default=n},{}],43:[function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._difficulty=t,1==Math.floor(15*Math.random())?(this._variant=1,this._shield=8):(this._variant=0,this._shield=4),1==this._difficulty?this._shield=Math.floor(.75*this._shield):15==this._difficulty&&(this._shield=Math.floor(1.5*this._shield)),this._x=Math.floor(54*Math.random()+5),this._y=-10,this._dir_x=0,this._dir_y=1,this._halfWidth=4,this._halfHeight=4}var t,i,n;return t=e,(i=[{key:"update",value:function(){this._x+=this._dir_x,this._y+=this._dir_y}},{key:"x",set:function(t){this._x=t},get:function(){return this._x}},{key:"y",set:function(t){this._y=t},get:function(){return this._y}},{key:"halfWidth",get:function(){return this._halfWidth}},{key:"halfHeight",get:function(){return this._halfHeight}},{key:"shield",set:function(t){this._shield=t},get:function(){return this._shield}},{key:"variant",get:function(){return this._variant}}])&&r(t.prototype,i),n&&r(t,n),e}();i.default=n},{}],44:[function(t,e,i){"use strict";var n=r(t("./snake.js"));r(t("./enemy.js")),r(t("./apple.js"));function r(t){return t&&t.__esModule?t:{default:t}}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var u=getMap("map-menu").copy(),l=getMap("map-1").copy(),p=getMap("map-1").copy(),c=(t("pixelbox/bleeper"),new n.default(l)),d="start",f=1,v=0,y={},_=1,g=2,m=50,x=1,b=3,w=Date.now(),S=Date.now();function T(t){c.resetSnake(),f=t,l=getMap("map-"+f).copy(),y={};for(var e=5*f;Object.keys(y).length<e;){var i=Math.floor(64*Math.random()),n=Math.floor(64*Math.random()),r=i+"-"+n,o=i+"-"+(n-1);l.get(i,n)||y[r]||y[o]||i==c.x&&n==c.y||(y[r]={x:i,y:n})}1==g?m=66:2==g?m=50:3==g&&(m=30),b=4,d="play",w=Date.now()}music("1984-by-frank-schroeter-from-filmmusic-io"),i.update=function(){if("start"==d)btnp.A?T(1):btnp.up||btnp.upt?_=1:btnp.down||btnp.downt?_=2:btnp.right||btnp.rightt?1==_?3<++g&&(g=1):2==_&&1<++x&&(x=0):(btnp.left||btnp.leftt)&&(1==_?--g<1&&(g=3):2==_&&--x<0&&(x=1)),cls(),u.draw(0,0),pen(7),print("UNBEATABLE SNAKE",32,18),1==_?draw(assets.selectorbtn,35,49):draw(assets.selectorbtn,35,59),pen(1),1==g?print("GAME: EASY",42,49):2==g?print("GAME: NORMAL",42,49):3==g&&print("GAME: HARD",42,49),1==x?(print("MUSIC: ON",42,59),music("1984-by-frank-schroeter-from-filmmusic-io")):0==x&&(print("MUSIC: OFF",42,59),music()),print("SPACE to Start",36,107);else if("complete"==d)btnp.A?T(1):btnp.M&&(d="start"),cls(),pen(7),print("UNBEATABLE SNAKE",32,18),pen(1),print("M for Menu",44,92),print("SPACE to Start",36,107),print("LEVEL "+(f-1),47,54),print("BEST  "+v,47,64);else if("win"==d)btnp.M&&(d="start"),cls(),pen(7),print("UNBEATABLE SNAKE",32,18),pen(1),print("OKAY MAYBE NOT",37,28),print("YOU WIN",50,38),pen(1),print("M for Menu",44,92),print("LEVEL "+(f-1),47,54),print("BEST  "+v,47,64);else if("cutscene"==d){var t=Date.now();1e3<=t-S&&(b--,console.log("cut scene second "+b),S=t),cls(),pen(1),print("COMPLETED LEVEL "+(f-1),30,44),pen(7),print("LOADING "+b,45,64),b<=0&&T(f)}else{var e=Date.now(),i=e-w;if(btn.right||btn.rightt?c.moveRight():btn.left||btn.leftt?c.moveLeft():btn.up||btn.upt?c.moveUp():(btn.down||btn.downt)&&c.moveDown(),m<=i){c.update();if(l.get(c.x,c.y)&&(d="complete",v<f-1&&(v=f-1)),p.get(c.x,c.y))if(4==p.get(c.x,c.y).sprite){c.snake_length=c.snake_length+5;var n=c.x+"-"+c.y;delete y[n],Object.keys(y).length<=0&&(d="cutscene",10<++f&&(d="win",v=f-1))}else p.get(c.x,c.y).sprite;w=e}if(cls(),"cutscene"!=d&&"win"!=d){l=getMap("map-"+f).copy(),p=getMap("map-1").copy(),c.draw_self(l);for(var r=0,o=Object.entries(y);r<o.length;r++){var s=h(o[r],2),a=(s[0],s[1]);p.set(a.x,a.y,4),p.set(a.x,a.y-1,5)}l.draw(0,0),p.draw(0,0)}}}},{"./apple.js":42,"./enemy.js":43,"./snake.js":45,"pixelbox/bleeper":21}],45:[function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=32,this._y=30,this._dir_x=0,this._dir_y=-1,this._snake_length=20,this._snake_path=[],this._snake_path.unshift({x:this._x,y:this._y})}var e,i,n;return e=t,(i=[{key:"moveRight",value:function(){-1!=this._dir_x&&(this._dir_x=1,this._dir_y=0)}},{key:"moveLeft",value:function(){1!=this._dir_x&&(this._dir_x=-1,this._dir_y=0)}},{key:"moveUp",value:function(){1!=this._dir_y&&(this._dir_x=0,this._dir_y=-1)}},{key:"moveDown",value:function(){-1!=this._dir_y&&(this._dir_x=0,this._dir_y=1)}},{key:"update",value:function(){if(this._x+=this._dir_x,this._y+=this._dir_y,this._snake_path.length<this._snake_length)this._snake_path.unshift({x:this._x,y:this._y});else{this._snake_path.unshift({x:this._x,y:this._y});this._snake_path.pop()}}},{key:"draw_self",value:function(n){this._snake_path.forEach(function(t,e,i){n.set(t.x,t.y,0,0,0,0)})}},{key:"resetSnake",value:function(){this._x=39,this._y=56,this._dir_x=0,this._dir_y=-1,this._snake_length=20,this._snake_path=[],this._snake_path.unshift({x:this._x,y:this._y})}},{key:"x",set:function(t){this._x=t},get:function(){return this._x}},{key:"y",set:function(t){this._y=t},get:function(){return this._y}},{key:"snake_length",set:function(t){this._snake_length=t},get:function(){return this._snake_length}}])&&r(e.prototype,i),n&&r(e,n),t}();i.default=n},{}],46:[function(f,t,e){"use strict";var i,n,p=f("."),r={dat:{palette:null,selectorbtn:null,tilesheet:null,bleeper:{_type:"Bleeper program",v:1,s:[{n:"Shot",i:[14,0,127,1],s:"']4'FD'?D'5D'+D'$D"},{n:"",i:[20,0,127,0],s:""},{n:"",i:[20,0,127,0],s:""},{n:"",i:[20,0,127,0],s:""},{n:"",i:[20,0,127,0],s:""}]},maps:{_type:"maps",maps:[{w:64,h:64,name:"map-3",sheet:"",data:"#&|l!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|~#&|4!!|L#&|4!!|~#&|,!!|~#&|,#%|0#&|,!!|L#&|,#%|0#&|,!!|~#&|,!!|~#&#%#&#%|~#&#%#&!!|L#&#%#&#%|~#&#%#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|L#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|L#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|L#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|6#&|4!!|6#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%#&#%|~#&#%#&!!|6#&|,#%|0#&|,!!|6#&#%#&#%|~#&#%#&!!|~#&|,!!|~#&|,#%|0#&|,!!|6#&#%#&#%|~#&#%#&!!|6#&|,#%|0#&|,!!|~#&|,!!|~#&|4!!|6#&#%|,#&|~#%|,#&!!|6#&|4!!|~#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%#&#%|~#&#%#&!!|D#&|,!!|D#&|,#%|0#&|,!!|D#&|,!!|5#&|4!!|/#&|4!!|/#&|4!!|5#&|,!!|5#&|,#%|0#&|,!!|>#&|,#%|0#&|,!!|5#&|,!!|5#&#%#&#%|~#&#%#&!!|>#&#%#&#%|~#&#%#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%#&#%|~#&#%#&!!|/#&|4!!|/#&#%#&#%|~#&#%#&!!|5#&|,!!|5#&|,#%|0#&|,!!|/#&|,#%|0#&|,!!|/#&|,#%|0#&|,!!|5#&|,!!|5#&|4!!|/#&#%#&#%|~#&#%#&!!|/#&|4!!|5#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|5#&|4!!|/#&#%#&#%|~#&#%#&!!|/#&|4!!|5#&|,!!|5#&|,#%|0#&|,!!|/#&|,#%|0#&|,!!|/#&|,#%|0#&|,!!|5#&|,!!|5#&#%#&#%|~#&#%#&!!|/#&|4!!|/#&#%#&#%|~#&#%#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%|,#&|~#%|,#&!!|>#&#%|,#&|~#%|,#&!!|5#&|,!!|5#&#%#&#%|~#&#%#&!!|>#&#%#&#%|~#&#%#&!!|5#&|,!!|5#&|,#%|0#&|,!!|>#&|,#%|0#&|,!!|5#&|,!!|5#&|4!!|/#&|4!!|/#&|4!!|5#&|,!!|D#&|,#%|0#&|,!!|D#&|,!!|D#&#%#&#%|~#&#%#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|D#&#%|,#&|~#%|,#&!!|D#&|,!!|~#&|4!!|6#&#%|,#&|~#%|,#&!!|6#&|4!!|~#&|,!!|~#&|,#%|0#&|,!!|6#&#%#&#%|~#&#%#&!!|6#&|,#%|0#&|,!!|~#&|,!!|~#&#%#&#%|~#&#%#&!!|6#&|,#%|0#&|,!!|6#&#%#&#%|~#&#%#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|6#&|4!!|6#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|L#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|L#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%|,#&|~#%|,#&!!|L#&#%|,#&|~#%|,#&!!|~#&|,!!|~#&#%#&#%|~#&#%#&!!|L#&#%#&#%|~#&#%#&!!|~#&|,!!|~#&|,#%|0#&|,!!|L#&|,#%|0#&|,!!|~#&|,!!|~#&|4!!|L#&|4!!|~#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|l"},{w:64,h:64,name:"map-menu",sheet:"",data:"#&|l!!|a#(!!|1#&|,!!|a#'!!|1#&|,!!|1#(!!|]#(!!|-#&|,!!|1#'!!|]#'!!|-#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|4#(!!|^#&|,!!|4#'!!|^#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|]#(!!|5#&|,!!|]#'!!|5#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|~#(!!|]#(!!|0#&|,!!|~#'!!|]#'!!|0#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|F#(!!|K#&|,!!|F#'!!|3##|/!!|=#&|,!!|T##!!|=#&|,!!|T##!!|=#&|,!!|T##|4!!|4#&|,!!|^##!!|4#&|,!!|^##!!|4#&|,!!|^##!!|1#(!!|,#&|,!!|^##!!|1#'!!|,#&|,!!|^##!!|4#&|,!!|2#(!!|T##!!|4#&|,!!|2#'!!|T##!!|4#&|,!!|^##!!|4#&|,!!|^##!!|4#&|,!!|^##!!|4#&|,!!|F##|B!!|4#&|,!!|i#&|,!!|i#&|l"},{w:64,h:64,name:"map-9",sheet:"",data:"#&|l!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|,#&|9!!|,#&!!|,#&|<!!|,#&!!|,#&|9!!|,#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|,#&|9!!|,#&!!|@#&!!|,#&|9!!|,#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|,!!|=#&!!|@#&!!|=#&|l"},{w:64,h:64,name:"map-10",sheet:"",data:"#&|l!!|i#&|,!!#&|O!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!|B#&|,!!|O#&!!#&|C!!|O#&!!|B#&|,!!|O#&|B!!#&|,!!|O#&!!|@#&!!#&|,!!|O#&!!#&!!|>#&!!#&|,!!|O#&!!#&!!|>#&!!#&|P!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|~#&|-!!#&|0!!|?#&!!#&!!#&!!|>#&!!#&|,!!|-#&|,#%#&!!#&#%|~#&!!|?#&!!#&!!#&!!|>#&!!#&|,!!|,#&#%|-#&!!#&#%#&|,#%#&!!|?#&!!#&!!#&!!|>#&!!#&|,!!|,#&|-#%#&!!#&#%#&|,#%#&!!|?#&!!#&!!#&!!|>#&!!#&|,!!|~#&#%#&!!#&#%#&|,#%#&!!|?#&!!#&!!#&!!|>#&!!#&|,!!|~#&#%#&!!#&#%#&|,#%#&!!|?#&!!#&!!#&!!|>#&!!#&|,!!|~#&#%#&!!#&#%#&|,#%#&!!|?#&!!#&!!#&!!|>#&!!#&|,!!|~#&#%#&!!#&#%|~#&!!|?#&!!#&!!#&!!|>#&!!#&|,!!|~#&|-!!#&|0!!|?#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!|>#&!!#&|,!!|M#&!!#&!!#&!!#&|>!!#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&!!#&!!#&!!|>#&|,!!|M#&!!#&|-!!#&!!|>#&|,!!|M#&!!#&#%#&!!#&!!|>#&|,!!|M#&!!#&#%#&!!#&!!|>#&|,!!|M#&!!#&#%#&!!#&!!|>#&|,!!|M#&!!#&#%#&!!#&!!|>#&|,!!|M#&!!#&#%#&!!#&!!|>#&|,!!|O#&#%#&!!|@#&|l"},{w:64,h:64,name:"map-7",sheet:"",data:"#&|l!!|i#&|,!!|i#&|,!!|i#&|,!!|6#&|~!!|X#&|,!!|5#&|,#%|,#&|/!!|5#&|0!!|C#&|,!!|3#&|-#%|1#&|,!!|3#&|,#%|~#&|,!!|B#&|,!!|2#&|,#%|4#&|,!!|2#&#%|0#&|,!!|A#&|,!!|1#&|,#%|6#&!!|2#&#%|1#&!!|A#&|,!!|/#&|-#%|7#&!!|1#&|,#%|1#&|,!!|@#&|,!!|~#&|,#%|8#&|,!!|1#&#%|3#&!!|@#&|,!!|-#&|,#%|7#&|-!!|2#&#%|3#&!!|@#&|,!!|-#&#%|3#&|0!!|4#&#%|3#&!!|@#&|,!!|-#&#%|2#&|,!!|9#&#%|2#&|,!!|1#&|1!!|2#&|,!!|-#&#%|1#&|,!!|:#&#%|0#&|-!!|1#&|,#%|/#&|-!!|0#&|,!!|-#&|,#%|/#&|,!!|:#&|,#%|/#&|,!!|2#&|,#%|2#&|-!!|~#&|,!!|~#&|,#%|-#&|,!!|:#&|,#%|/#&|,!!|3#&#%|5#&|,!!|-#&|,!!|/#&|/!!|:#&|,#%|0#&!!|4#&#%|6#&!!|-#&|,!!|@#&|/#%|1#&!!|4#&|,#%|5#&!!|-#&|,!!|;#&|0#%|5#&|,!!|4#&|,#%|3#&|,!!|-#&|,!!|8#&|~#%|;#&|,!!|4#&|-#%|/#&|-!!|~#&|,!!|7#&|,#%|?#&!!|6#&|1!!|0#&|,!!|6#&|,#%|@#&!!|C#&|,!!|6#&#%|@#&|,!!|C#&|,!!|6#&#%|6#&|~#%|/#&|,!!|D#&|,!!|6#&#%|5#&|,!!|,#&|-#%|,#&|,!!|0#&|~!!|;#&|,!!|6#&#%|4#&|,!!|/#&|~!!|0#&|,#%|,#&|-!!|9#&|,!!|6#&#%|3#&|,!!|:#&#%|/#&|,!!|8#&|,!!|6#&|,#%|0#&|-!!|:#&|,#%|0#&!!|8#&|,!!|7#&|-#%|,#&|-!!|<#&#%|1#&|,!!|7#&|,!!|9#&|~!!|>#&#%|2#&!!|7#&|,!!|Q#&#%|2#&!!|1#&|-!!|-#&|,!!|Q#&|,#%|1#&!!|0#&|,#%#&|,!!|,#&|,!!|R#&#%|1#&!!|0#&#%|-#&!!|,#&|,!!|3#&|5!!|>#&#%|1#&|,!!|/#&#%|-#&!!|,#&|,!!|2#&|,#%|3#&|/!!|/#&|~!!|1#&#%|2#&!!|/#&#%|-#&!!|,#&|,!!|1#&|,#%|8#&|1#%|,#&|,!!|0#&|,#%|1#&!!|~#&|,#%|-#&!!|,#&|,!!|0#&|,#%|C#&!!|1#&#%|1#&!!|~#&#%|-#&|,!!|,#&|,!!|0#&#%|D#&!!|1#&|,#%|0#&|,!!|,#&|,#%|-#&!!|-#&|,!!|0#&#%|A#&|~!!|2#&#%|1#&|~#%|-#&|,!!|-#&|,!!|0#&#%|@#&|,!!|5#&#%|8#&!!|~#&|,!!|0#&|,#%|1#&|0#%|1#&|,!!|6#&|,#%|7#&!!|~#&|,!!|1#&|-#%|,#&|~!!|~#&|~#%|~#&!!|8#&#%|7#&!!|~#&|,!!|3#&|~!!|4#&|,#%|-#&!!|8#&|,#%|6#&|,!!|-#&|,!!|B#&|,#%|,#&|,!!|8#&|,#%|6#&|,!!|,#&|,!!|C#&#%|-#&!!|9#&|,#%|6#&!!|,#&|,!!|C#&#%|-#&!!|:#&#%|6#&!!|,#&|,!!|B#&|,#%|-#&|,!!|9#&#%|5#&|,!!|,#&|,!!|A#&|,#%|/#&!!|9#&#%|3#&|-!!|-#&|,!!|@#&|,#%|0#&!!|9#&#%|2#&|,!!|/#&|,!!|>#&|-#%|1#&!!|9#&#%|0#&|-!!|0#&|,!!|<#&|-#%|2#&|,!!|8#&|,#%|/#&|,!!|2#&|,!!|;#&|,#%|4#&!!|8#&|,#%|0#&!!|3#&|,!!|:#&|,#%|4#&|,!!|6#&|-#%|1#&!!|3#&|,!!|:#&#%|5#&!!|6#&|,#%|3#&!!|3#&|,!!|:#&#%|4#&|,!!|5#&|,#%|4#&|,!!|2#&|,!!|:#&|,#%|2#&|,!!|5#&|,#%|6#&|,!!|1#&|,!!|;#&|,#%|/#&|-!!|5#&|,#%|8#&!!|1#&|,!!|<#&|1!!|7#&#%|9#&!!|1#&|,!!|P#&|,#%|7#&|,!!|1#&|,!!|Q#&|0#%|0#&|-!!|2#&|,!!|V#&|2!!|4#&|,!!|i#&|l"},{w:64,h:64,name:"map-2",sheet:"",data:"#&|l!!|i#&|,!!|i#&|,!!|i#&|,!!|~#&|~!!|X#&|~!!|~#&|,!!|-#&|,#%|,#&|,!!|V#&|,#%|,#&|,!!|-#&|,!!|-#&#%|~#&!!|V#&#%|~#&!!|-#&|,!!|-#&#%|~#&!!|V#&#%|~#&!!|-#&|,!!|-#&|,#%|,#&|,!!|V#&|,#%|,#&|,!!|-#&|,!!|~#&|~!!|X#&|~!!|~#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|7#&|~!!|F#&|~!!|7#&|,!!|6#&|,#%|,#&|,!!|D#&|,#%|,#&|,!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&#%|~#&!!|D#&#%|~#&!!|6#&|,!!|6#&|,#%|,#&|,!!|D#&|,#%|,#&|,!!|6#&|,!!|7#&|~!!|F#&|~!!|7#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|~#&|~!!|X#&|~!!|~#&|,!!|-#&|,#%|,#&|,!!|V#&|,#%|,#&|,!!|-#&|,!!|-#&#%|~#&!!|V#&#%|~#&!!|-#&|,!!|-#&#%|~#&!!|V#&#%|~#&!!|-#&|,!!|-#&|,#%|,#&|,!!|V#&|,#%|,#&|,!!|-#&|,!!|~#&|~!!|X#&|~!!|~#&|,!!|i#&|,!!|i#&|,!!|i#&|l"},{w:64,h:64,name:"map-4",sheet:"",data:"#&|l!!|i#&|,!!|i#&|,!!|H#&|,!!|H#&|,!!|G#&|~!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|-#&|E#%|,#&|E!!|-#&|,!!|,#&|,#%|a#&|,!!|,#&|,!!|,#&|,#%|a#&|,!!|,#&|,!!|-#&|E#%|,#&|E!!|-#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&|~!!|G#&|,!!|H#&|,!!|H#&|,!!|i#&|,!!|i#&|l"},{w:64,h:64,name:"map-1",sheet:"",data:"#&|l!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|l"},{w:64,h:64,name:"map-8",sheet:"",data:"#&|l!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|0#&|]!!|0#&|,!!|/#&|,#%|Z#&|,!!|/#&|,!!|~#&|,#%|]#&|,!!|~#&|,!!|~#&#%|_#&!!|~#&|,!!|~#&#%|_#&!!|~#&|,!!|~#&#%|?#&|4#%|?#&!!|~#&|,!!|~#&#%|>#&|,!!|2#&|,#%|>#&!!|~#&|,!!|~#&#%|=#&|,!!|4#&|,#%|=#&!!|~#&|,!!|~#&#%|<#&|,!!|6#&|,#%|<#&!!|~#&|,!!|~#&|,#%|:#&|,!!|8#&|,#%|:#&|,!!|~#&|,!!|/#&|,#%|9#&!!|:#&#%|9#&|,!!|/#&|,!!|0#&|;!!|:#&|;!!|0#&|,!!|i#&|,!!|i#&|,!!|0#&|;!!|:#&|;!!|0#&|,!!|/#&|,#%|9#&!!|:#&#%|9#&|,!!|/#&|,!!|~#&|,#%|:#&|,!!|8#&|,#%|;#&!!|~#&|,!!|~#&#%|<#&|,!!|6#&|,#%|<#&!!|~#&|,!!|~#&#%|=#&|,!!|4#&|,#%|=#&!!|~#&|,!!|~#&#%|>#&|,!!|2#&|,#%|>#&!!|~#&|,!!|~#&#%|?#&|4#%|?#&!!|~#&|,!!|~#&#%|_#&!!|~#&|,!!|~#&#%|_#&!!|~#&|,!!|~#&|,#%|]#&|,!!|~#&|,!!|/#&|,#%|Z#&|,!!|/#&|,!!|0#&|]!!|0#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|0#&|2!!|L#&|2!!|0#&|,!!|/#&|,#%|0#&|,!!|J#&|,#%|0#&|,!!|/#&|,!!|~#&|,#%|3#&!!|H#&|,#%|3#&!!|~#&|,!!|~#&#%|4#&!!|H#&#%|4#&!!|~#&|,!!|~#&#%|4#&!!|H#&#%|4#&!!|~#&|,!!|~#&#%|4#&!!|H#&#%|4#&!!|~#&|,!!|~#&#%|4#&!!|H#&#%|4#&!!|~#&|,!!|~#&#%|4#&!!|H#&#%|4#&!!|~#&|,!!|~#&#%|4#&!!|H#&#%|4#&!!|~#&|,!!|~#&|,#%|2#&|,!!|H#&|,#%|2#&|,!!|~#&|,!!|/#&|,#%|0#&|,!!|J#&|,#%|0#&|,!!|/#&|,!!|0#&|2!!|L#&|2!!|0#&|,!!|i#&|,!!|i#&|,!!|i#&|,!!|i#&|l"},{w:64,h:64,name:"map-6",sheet:"",data:"#&|l!!|i#&|,!!|i#&|,!!|H#&|,!!|H#&|,!!|G#&|~!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|4#&|,!!|;#&#%|,#&!!|;#&|,!!|4#&|,!!|3#&|~!!|:#&#%|,#&!!|:#&|~!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|,#&|2#%|,#&|2!!|3#&#%|,#&!!|3#&|2#%|,#&|2!!|,#&|,!!#&|,#%|:#&|,!!|2#&#%|,#&!!|2#&|,#%|:#&|,!!#&|,!!#&|,#%|:#&|,!!|2#&#%|,#&!!|2#&|,#%|:#&|,!!#&|,!!|,#&|2#%|,#&|2!!|3#&#%|,#&!!|3#&|2#%|,#&|2!!|,#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&|~!!|:#&#%|,#&!!|:#&|~!!|3#&|,!!|4#&|,!!|;#&#%|,#&!!|;#&|,!!|4#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|-#&|E#%|,#&|E!!|-#&|,!!|,#&|,#%|a#&|,!!|,#&|,!!|,#&|,#%|a#&|,!!|,#&|,!!|-#&|E#%|,#&|E!!|-#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|4#&|,!!|;#&#%|,#&!!|;#&|,!!|4#&|,!!|3#&|~!!|:#&#%|,#&!!|:#&|~!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|,#&|2#%|,#&|2!!|3#&#%|,#&!!|3#&|2#%|,#&|2!!|,#&|,!!#&|,#%|:#&|,!!|2#&#%|,#&!!|2#&|,#%|:#&|,!!#&|,!!#&|,#%|:#&|,!!|2#&#%|,#&!!|2#&|,#%|:#&|,!!#&|,!!|,#&|2#%|,#&|2!!|3#&#%|,#&!!|3#&|2#%|,#&|2!!|,#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&#%|,#&!!|:#&#%|,#&!!|:#&#%|,#&!!|3#&|,!!|3#&|~!!|:#&#%|,#&!!|:#&|~!!|3#&|,!!|4#&|,!!|;#&#%|,#&!!|;#&|,!!|4#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&#%|,#&!!|G#&|,!!|G#&|~!!|G#&|,!!|H#&|,!!|H#&|,!!|i#&|,!!|i#&|l"},{w:64,h:64,name:"map-5",sheet:"",data:"#&|l!!|1#&!!|;#&!!|8#&!!|9#&!!|/#&|,!!|i#&|,!!|,#&!!|7#&!!|:#&!!|F#&|,!!|i#&|,!!|i#&|,!!|2#&!!|6#&!!|D#&!!|7#&|,!!|i#&|,!!|O#&!!|;#&!!|0#&|,!!|7#&!!|Y#&|-!!|F#&!!|K#&|,!!|U#&!!|<#&|,!!|~#&!!|d#&|,!!|<#&!!|U#&|,!!|e#&!!|-#&|,!!|B#&!!|1#&!!|;#&!!|5#&|,!!|i#&|,!!|3#&!!|G#&!!|?#&|-!!|=#&!!|T#&|,!!|W#&!!|:#&|-!!|`#&!!|1#&|,!!|i#&|,!!|F#&!!|K#&|,!!|i#&|,!!|/#&!!|T#&!!|4#&!!|,#&|,!!|i#&|,!!|i#&|,!!|8#&!!|>#&!!|D#&|,!!|@#&!!|Q#&|,!!|c#&!!|/#&|,!!|5#&!!|]#&|,!!|I#&!!|6#&!!|;#&|,!!|g#&!!#&|,!!|i#&|,!!|i#&|,!!|]#&!!|5#&|-!!|;#&!!|<#&!!|=#&!!|~#&|,!!|2#&!!|`#&|,!!|i#&|,!!|G#&!!|J#&|,!!|@#&!!|Q#&|,!!|S#&!!|=#&|-!!|i#&|,!!|i#&|,!!|7#&!!|=#&!!|F#&|,!!|E#&!!|@#&!!|5#&|,!!|i#&|,!!|/#&!!|[#&!!|0#&|,!!|i#&|,!!|O#&!!|B#&|-!!|h#&|,!!|4#&!!|Z#&!!|,#&|,!!|;#&!!|1#&!!|N#&|,!!|i#&|,!!|i#&|,!!|0#&!!|A#&!!|I#&|,!!|Y#&!!|8#&|,!!|?#&!!|L#&!!|/#&|,!!|Q#&!!|?#&|~!!|h#&|,!!|i#&|,!!|,#&!!|6#&!!|X#&|,!!|5#&!!|8#&!!|0#&!!|7#&!!|8#&|l"}]}},root:"assets/",img:["palette.png","selectorbtn.png","tilesheet.png"],snd:[],settings:{name:"unbeatbale snake",version:"2.1.0",appid:"decaKWXbRFwXMypL",screen:{fullscreen:!1,resizable:!1,keepAspectRatio:!1,width:128,height:128,pixelSize:{width:6,height:6}},tileSize:{width:2,height:2},palette:{name:"db16",file:"palette",colors:["#140c1c","#deeed6","#d2aa99","#346524","#4e4a4e","#757161","#8595a1","#6daa2c","#854c30","#d04648","#d27d2c","#dad45e","#442434","#30346d","#597dce","#6dc2ca"]},controls:{A:32,downt:83,upt:87,down:40,up:38,rightt:68,leftt:65,right:39,left:37,C:190,B:88,M:77},touchEvent:{multiTouch:!1,disableContextMenu:!0,hideMousePointer:!1},gamepad:{analogToDpad:!0,deadZone:.5},loader:{colors:["#140C1C","#DEEED6"],custom:""}}},v=p.settings=r.settings,o=f("./assetLoader");function s(){i.resume(),document.body.removeEventListener("mousedown",s),document.body.removeEventListener("touchstart",s)}p.inherits=f("./inherits"),p.setFullScreen=function(){},i=null,n=window.AudioContext||window.webkitAudioContext,window.AudioContext=window.webkitAudioContext=function(){return i||(i=new n,document.body.addEventListener("mousedown",s),document.body.addEventListener("touchstart",s),i)};var a=f("audio-manager"),h=p.audioManager=new a(["sfx"]);h.settings.audioPath="audio/",h.settings.defaultFade=.3,h.init(),h.setVolume("sfx",1),p.sfx=function(t,e,i,n){h.playSound("sfx",t,e,i,n)},p.music=function(t,e,i,n){t?h.playLoopSound("sfx",t,e,0,0,i,n):h.stopLoopSound("sfx")};var c,u=p.btn={},l=p.btnp={},d=p.btnr={},y={},_=[],g=0;function m(){for(var t=0;t<g;t++)l[_[t]]=!1,d[_[t]]=!1}function x(t,e){var i=y[t];i&&(e&&!u[i]&&(l[i]=!0),!e&&u[i]&&(d[i]=!0),u[i]=e)}!function(){var t=v.controls||{up:38,down:40,left:37,right:39,A:32,B:88};for(var e in t)y[t[e]]=e,u[e]=!1,l[e]=!1,d[e]=!1,_.push(e);g=_.length}(),window.addEventListener("keydown",function(t){t.preventDefault(),t.repeat||x(t.keyCode,!0)}),window.addEventListener("keyup",function(t){t.preventDefault(),x(t.keyCode,!1)}),p.chr$=function(t){return String.fromCharCode(t)},p.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},p.random=function(t,e){return void 0===e?~~(t*Math.random()):~~(t+Math.random()*(e-t))};var b=f("./Texture"),w=f("./TileMap");c=f("./webGL"),f("./Texture/webGL"),f("./TileMap/webGL"),p.webGL=c,f("./Texture/textWebGL");var S=v.tileSize.width,T=v.tileSize.height;b.setTileSize(S,T),w.setTileSize(S,T),p.texture=function(t){var e=new b(t.width,t.height);return e.clear().draw(t,0,0),e},p.tilesheet=function(t){return b.prototype.setGlobalTilesheet(t)};var E=function(){var t=v.screen,h=t.width,u=t.height,l=t.pixelSize,e=p.$screen=new b(h,u);e.canvas=c.context.canvas;var i=e.canvas,n=i.style;if(document.body.appendChild(i),t.fullscreen)if(t.keepAspectRatio){var r=function(){var t=window.innerWidth,e=window.innerHeight,i=h*l.width,n=u*l.height,r=Math.min(t/i,e/n),o=i*r,s=n*r,a=p.$screen.canvas.style;a.width=o+"px",a.height=s+"px",a.left=(t-o)/2+"px",a.top=(e-s)/2+"px"};addEventListener("resize",r),r()}else n.width=n.height="100%";else n.width=h*l.width+"px",n.height=u*l.height+"px";return e}();p.cls=function(){return E.cls()},p.sprite=function(t,e,i,n,r,o){return E.sprite(t,e,i,n,r,o)},p.draw=function(t,e,i,n,r,o){return E.draw(t,e,i,n,r,o)},p.rect=function(t,e,i,n){return E.rect(t,e,i,n)},p.rectf=function(t,e,i,n){return E.rectf(t,e,i,n)},p.camera=function(t,e){return E.setCamera(t,e)},p.pen=function(t){return E.pen(t)},p.paper=function(t){return E.paper(t)},p.locate=function(t,e){return E.locate(t,e)},p.print=function(t,e,i){return E.print(t,e,i)},p.println=function(t){return E.println(t)},p.setCharset=function(t){return E.setCharset(t)},p.getMap=w.getMap,p.rectfill=p.rectf,E.canvas.addEventListener("contextmenu",function(t){return t.preventDefault(),!1});var A=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1/60)};window.frameId=0;var M=~~(v.screen.width/2),G=~~(v.screen.width/4),R=~~(v.screen.height/2);var L=["#000","#FFF"],D=v.loader&&v.loader.colors||v.loaderColors||L;Array.isArray(D)||(D=L);var B=f("./Color");E.setPalette([(new B).fromString(D[0]),(new B).fromString(D[1])]),E.paper(0).cls().paper(1).pen(1).rect(M-G-2,R-4,2*G+4,8),c.commit(),o.preloadStaticAssets(r,function(t,d){if(E.paper(0).pen(1).cls(),t)return console.error(t),void print(t);for(var e in p.assets=d,p)window[e]=p[e];var i=p.bleeper=f("./bleeper");window.bleeper=i,d.bleeper&&i.loadProgram(d.bleeper),function(){var t=f("./Color"),e=v.palette;if(e.file){for(var i=e.file.split("/"),n=d;n&&i.length;)n=n[i.shift()];if(!n)return;var r=n.width,o=n.height,s=n.x||0,a=n.y||0;n._isSprite&&(n=n.img);var h=f("./domUtils/createCanvas")(r,o).getContext("2d");h.drawImage(n,s,a,r,o,0,0,r,o);for(var u=h.getImageData(0,0,r,o).data,l=[],p=0;p<u.length;p+=4)u[p+3]<=1||l.push((new t).fromPixel(u,p));E.setPalette(l)}else{var c;for(c=e.colors?e.colors:e,l=[],p=0;p<c.length;p++)l.push((new t).fromString(c[p]));E.setPalette(l)}}(),d.tilesheet&&p.tilesheet(d.tilesheet),w.loadBank(d.maps),d.slicesConfig&&f("./NineSlice/init")(d.slicesConfig);var n=f("./gamepad"),r=v.gamepad||{};r.analogToDpad&&n.mapAnalogStickToDpad(r.deadZone);var o=f("../../src/main.js");o.update?(c.batcher.flush(),m(),function t(){window.frameId+=1,n.update(),o.update(),m(),c.commit(),A(t)}()):function t(){c.commit(),A(t)}()},function(t,e,i,n){E.rect(M-G-2,R-4,2*G+4,8).rectf(M-G,R-2,~~(n*G*2),4),c.commit()})},{".":24,"../../src/main.js":44,"./Color":11,"./NineSlice/init":13,"./Texture":14,"./Texture/textWebGL":16,"./Texture/webGL":17,"./TileMap":18,"./TileMap/webGL":19,"./assetLoader":20,"./bleeper":21,"./domUtils/createCanvas":22,"./gamepad":23,"./inherits":25,"./webGL":31,"audio-manager":5}]},{},[46]);